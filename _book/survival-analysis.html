<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Survival Analysis | Data Analysis in Medicine and Health using R</title>
  <meta name="description" content="Chapter 11 Survival Analysis | Data Analysis in Medicine and Health using R" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Survival Analysis | Data Analysis in Medicine and Health using R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bookdown.org/drki_musa/dataanalysis/" />
  
  
  <meta name="github-repo" content="drkamarul/multivar_data_analysis" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Survival Analysis | Data Analysis in Medicine and Health using R" />
  
  
  

<meta name="author" content="Kamarul Imran, Wan Nor Arifin, Tengku Muhammad Hanis Tengku Mukhtar" />


<meta name="date" content="2022-01-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="poisson-regression.html"/>
<link rel="next" href="missing-data.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis in Medicine and Health using R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html"><i class="fa fa-check"></i><b>1</b> Introduction to R, RStudio and RStudio Cloud</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#rstudio-cloud"><i class="fa fa-check"></i><b>1.1</b> RStudio Cloud</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#the-rstudio-cloud-registration"><i class="fa fa-check"></i><b>1.1.1</b> The RStudio Cloud Registration</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#register-and-log-in"><i class="fa fa-check"></i><b>1.1.2</b> Register and log in</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#point-and-click-r-gui"><i class="fa fa-check"></i><b>1.2</b> Point and click R GUI</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#rstudio-server"><i class="fa fa-check"></i><b>1.3</b> RStudio Server</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#installing-r-and-rstudio-on-your-local-machine"><i class="fa fa-check"></i><b>1.4</b> Installing R and RStudio on Your Local Machine</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#installing-r"><i class="fa fa-check"></i><b>1.4.1</b> Installing R</a></li>
<li class="chapter" data-level="1.4.2" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#installing-rstudio-ide"><i class="fa fa-check"></i><b>1.4.2</b> Installing RStudio IDE</a></li>
<li class="chapter" data-level="1.4.3" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#checking-r-and-rstudio-installations"><i class="fa fa-check"></i><b>1.4.3</b> Checking R and RStudio Installations</a></li>
<li class="chapter" data-level="1.4.4" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#installation-of-miktex-texlive-and-mactex"><i class="fa fa-check"></i><b>1.4.4</b> Installation of MiKTeX, TeXLive and MacTex</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#starting-your-rstudio"><i class="fa fa-check"></i><b>1.5</b> Starting your RStudio</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#console-tab"><i class="fa fa-check"></i><b>1.5.1</b> Console tab</a></li>
<li class="chapter" data-level="1.5.2" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#files-plots-packages-help-and-viewer-pane"><i class="fa fa-check"></i><b>1.5.2</b> Files, Plots, Packages, Help and Viewer Pane</a></li>
<li class="chapter" data-level="1.5.3" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#environment-history-connection-and-build-pane"><i class="fa fa-check"></i><b>1.5.3</b> Environment, History, Connection and Build Pane</a></li>
<li class="chapter" data-level="1.5.4" data-path="introduction-to-r-rstudio-and-rstudio-cloud.html"><a href="introduction-to-r-rstudio-and-rstudio-cloud.html#source-pane"><i class="fa fa-check"></i><b>1.5.4</b> Source Pane</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html"><i class="fa fa-check"></i><b>2</b> R Scripts and R Packages</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#open-a-new-r-script"><i class="fa fa-check"></i><b>2.1</b> Open a new R script</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#our-first-r-script"><i class="fa fa-check"></i><b>2.1.1</b> Our first R script</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#function-argument-and-parameters"><i class="fa fa-check"></i><b>2.1.2</b> Function, Argument and Parameters</a></li>
<li class="chapter" data-level="2.1.3" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#need-more-help"><i class="fa fa-check"></i><b>2.1.3</b> Need more help?</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#packages"><i class="fa fa-check"></i><b>2.2</b> Packages</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#packages-on-cran"><i class="fa fa-check"></i><b>2.2.1</b> Packages on CRAN</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#check-if-the-package-you-need-is-available-in-your-r-library"><i class="fa fa-check"></i><b>2.2.2</b> Check if the package you need is available in your R library</a></li>
<li class="chapter" data-level="2.2.3" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#install-an-r-package"><i class="fa fa-check"></i><b>2.2.3</b> Install an R package</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#directory"><i class="fa fa-check"></i><b>2.3</b> Directory</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#starting-your-r-job"><i class="fa fa-check"></i><b>2.3.1</b> Starting your R job</a></li>
<li class="chapter" data-level="2.3.2" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#create-new-project"><i class="fa fa-check"></i><b>2.3.2</b> Create new project</a></li>
<li class="chapter" data-level="2.3.3" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#where-is-my-data"><i class="fa fa-check"></i><b>2.3.3</b> Where is my data?</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#upload-data-to-rstudio-cloud"><i class="fa fa-check"></i><b>2.4</b> Upload data to RStudio Cloud</a></li>
<li class="chapter" data-level="2.5" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#more-resources-on-rstudio-cloud"><i class="fa fa-check"></i><b>2.5</b> More resources on RStudio Cloud</a></li>
<li class="chapter" data-level="2.6" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#need-help"><i class="fa fa-check"></i><b>2.6</b> Need help?</a></li>
<li class="chapter" data-level="2.7" data-path="r-scripts-and-r-packages.html"><a href="r-scripts-and-r-packages.html#bookdown"><i class="fa fa-check"></i><b>2.7</b> Bookdown</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rstudio-project.html"><a href="rstudio-project.html"><i class="fa fa-check"></i><b>3</b> RStudio Project</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rstudio-project.html"><a href="rstudio-project.html#objectives"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rstudio-project.html"><a href="rstudio-project.html#dataset-repository-on-github"><i class="fa fa-check"></i><b>3.2</b> Dataset repository on GitHub</a></li>
<li class="chapter" data-level="3.3" data-path="rstudio-project.html"><a href="rstudio-project.html#rstudio-project-on-rstudio-cloud"><i class="fa fa-check"></i><b>3.3</b> RStudio project on RStudio Cloud</a></li>
<li class="chapter" data-level="3.4" data-path="rstudio-project.html"><a href="rstudio-project.html#rstudio-project-on-local-machine"><i class="fa fa-check"></i><b>3.4</b> RStudio project on local machine</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-visualization.html"><a href="data-visualization.html"><i class="fa fa-check"></i><b>4</b> Data Visualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-visualization.html"><a href="data-visualization.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="data-visualization.html"><a href="data-visualization.html#history-and-objectives-of-data-visualization"><i class="fa fa-check"></i><b>4.2</b> History and objectives of Data Visualization</a></li>
<li class="chapter" data-level="4.3" data-path="data-visualization.html"><a href="data-visualization.html#ingredients-for-good-graphics"><i class="fa fa-check"></i><b>4.3</b> Ingredients for Good Graphics</a></li>
<li class="chapter" data-level="4.4" data-path="data-visualization.html"><a href="data-visualization.html#graphics-packages-in-r"><i class="fa fa-check"></i><b>4.4</b> Graphics Packages in R</a></li>
<li class="chapter" data-level="4.5" data-path="data-visualization.html"><a href="data-visualization.html#the-ggplot2-package"><i class="fa fa-check"></i><b>4.5</b> The <strong>ggplot2</strong> Package</a></li>
<li class="chapter" data-level="4.6" data-path="data-visualization.html"><a href="data-visualization.html#preparation"><i class="fa fa-check"></i><b>4.6</b> Preparation</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="data-visualization.html"><a href="data-visualization.html#create-a-new-rstudio-project"><i class="fa fa-check"></i><b>4.6.1</b> Create a New RStudio Project</a></li>
<li class="chapter" data-level="4.6.2" data-path="data-visualization.html"><a href="data-visualization.html#important-questions-when-making-graphs"><i class="fa fa-check"></i><b>4.6.2</b> Important Questions when Making Graphs</a></li>
<li class="chapter" data-level="4.6.3" data-path="data-visualization.html"><a href="data-visualization.html#read-data"><i class="fa fa-check"></i><b>4.6.3</b> Read Data</a></li>
<li class="chapter" data-level="4.6.4" data-path="data-visualization.html"><a href="data-visualization.html#load-the-library"><i class="fa fa-check"></i><b>4.6.4</b> Load the Library</a></li>
<li class="chapter" data-level="4.6.5" data-path="data-visualization.html"><a href="data-visualization.html#read-dataset"><i class="fa fa-check"></i><b>4.6.5</b> Read Dataset</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="data-visualization.html"><a href="data-visualization.html#basic-plots"><i class="fa fa-check"></i><b>4.7</b> Basic Plots</a></li>
<li class="chapter" data-level="4.8" data-path="data-visualization.html"><a href="data-visualization.html#adding-another-variable"><i class="fa fa-check"></i><b>4.8</b> Adding another variable</a></li>
<li class="chapter" data-level="4.9" data-path="data-visualization.html"><a href="data-visualization.html#making-subplots"><i class="fa fa-check"></i><b>4.9</b> Making Subplots</a></li>
<li class="chapter" data-level="4.10" data-path="data-visualization.html"><a href="data-visualization.html#overlaying-plots"><i class="fa fa-check"></i><b>4.10</b> Overlaying Plots</a></li>
<li class="chapter" data-level="4.11" data-path="data-visualization.html"><a href="data-visualization.html#combining-different-plots"><i class="fa fa-check"></i><b>4.11</b> Combining Different Plots</a></li>
<li class="chapter" data-level="4.12" data-path="data-visualization.html"><a href="data-visualization.html#statistical-transformation"><i class="fa fa-check"></i><b>4.12</b> Statistical Transformation</a></li>
<li class="chapter" data-level="4.13" data-path="data-visualization.html"><a href="data-visualization.html#customizing-title"><i class="fa fa-check"></i><b>4.13</b> Customizing Title</a></li>
<li class="chapter" data-level="4.14" data-path="data-visualization.html"><a href="data-visualization.html#adjusting-axes"><i class="fa fa-check"></i><b>4.14</b> Adjusting Axes</a></li>
<li class="chapter" data-level="4.15" data-path="data-visualization.html"><a href="data-visualization.html#choosing-themes"><i class="fa fa-check"></i><b>4.15</b> Choosing Themes</a></li>
<li class="chapter" data-level="4.16" data-path="data-visualization.html"><a href="data-visualization.html#saving-plots"><i class="fa fa-check"></i><b>4.16</b> Saving Plots</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>5</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-wrangling.html"><a href="data-wrangling.html#definition-of-data-wrangling"><i class="fa fa-check"></i><b>5.1</b> Definition of data wrangling</a></li>
<li class="chapter" data-level="5.2" data-path="data-wrangling.html"><a href="data-wrangling.html#data-wrangling-with-dplyr-package"><i class="fa fa-check"></i><b>5.2</b> Data wrangling with <strong>dplyr</strong> package</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-wrangling.html"><a href="data-wrangling.html#dplyr-package"><i class="fa fa-check"></i><b>5.2.1</b> <strong>dplyr</strong> package</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-wrangling.html"><a href="data-wrangling.html#common-procedures-for-doing-data-transformation"><i class="fa fa-check"></i><b>5.3</b> Common procedures for doing data transformation</a></li>
<li class="chapter" data-level="5.4" data-path="data-wrangling.html"><a href="data-wrangling.html#some-dplyr-functions"><i class="fa fa-check"></i><b>5.4</b> Some <strong>dplyr</strong> functions</a></li>
<li class="chapter" data-level="5.5" data-path="data-wrangling.html"><a href="data-wrangling.html#create-a-new-project-or-set-your-working-directory"><i class="fa fa-check"></i><b>5.5</b> Create a new project or set your working directory</a></li>
<li class="chapter" data-level="5.6" data-path="data-wrangling.html"><a href="data-wrangling.html#load-the-libraries"><i class="fa fa-check"></i><b>5.6</b> Load the libraries</a></li>
<li class="chapter" data-level="5.7" data-path="data-wrangling.html"><a href="data-wrangling.html#datasets"><i class="fa fa-check"></i><b>5.7</b> Datasets</a></li>
<li class="chapter" data-level="5.8" data-path="data-wrangling.html"><a href="data-wrangling.html#select-variables-generate-new-variable-and-rename-variable"><i class="fa fa-check"></i><b>5.8</b> Select variables, generate new variable and rename variable</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="data-wrangling.html"><a href="data-wrangling.html#select-variables-using-dplyrselect"><i class="fa fa-check"></i><b>5.8.1</b> Select variables using <code>dplyr::select()</code></a></li>
<li class="chapter" data-level="5.8.2" data-path="data-wrangling.html"><a href="data-wrangling.html#generate-new-variable-using-mutate"><i class="fa fa-check"></i><b>5.8.2</b> Generate new variable using <code>mutate()</code></a></li>
<li class="chapter" data-level="5.8.3" data-path="data-wrangling.html"><a href="data-wrangling.html#rename-variable-using-rename"><i class="fa fa-check"></i><b>5.8.3</b> Rename variable using <code>rename()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="data-wrangling.html"><a href="data-wrangling.html#sorting-data-and-select-observation"><i class="fa fa-check"></i><b>5.9</b> Sorting data and select observation</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="data-wrangling.html"><a href="data-wrangling.html#sorting-data-using-arrange"><i class="fa fa-check"></i><b>5.9.1</b> Sorting data using <code>arrange()</code></a></li>
<li class="chapter" data-level="5.9.2" data-path="data-wrangling.html"><a href="data-wrangling.html#select-observation-using-filter"><i class="fa fa-check"></i><b>5.9.2</b> Select observation using <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="data-wrangling.html"><a href="data-wrangling.html#group-data-and-get-summary-statistics"><i class="fa fa-check"></i><b>5.10</b> Group data and get summary statistics</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="data-wrangling.html"><a href="data-wrangling.html#group-data-using-group_by"><i class="fa fa-check"></i><b>5.10.1</b> Group data using <code>group_by()</code></a></li>
<li class="chapter" data-level="5.10.2" data-path="data-wrangling.html"><a href="data-wrangling.html#summary-statistic-using-summarize"><i class="fa fa-check"></i><b>5.10.2</b> Summary statistic using <code>summarize()</code></a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="data-wrangling.html"><a href="data-wrangling.html#more-complicated-dplyr-verbs"><i class="fa fa-check"></i><b>5.11</b> More complicated <strong>dplyr</strong> verbs</a></li>
<li class="chapter" data-level="5.12" data-path="data-wrangling.html"><a href="data-wrangling.html#data-transformation-for-categorical-variables"><i class="fa fa-check"></i><b>5.12</b> Data transformation for categorical variables</a>
<ul>
<li class="chapter" data-level="5.12.1" data-path="data-wrangling.html"><a href="data-wrangling.html#forcats-package"><i class="fa fa-check"></i><b>5.12.1</b> <strong>forcats</strong> package</a></li>
<li class="chapter" data-level="5.12.2" data-path="data-wrangling.html"><a href="data-wrangling.html#conversion-from-numeric-to-factor-variables"><i class="fa fa-check"></i><b>5.12.2</b> Conversion from numeric to factor variables</a></li>
<li class="chapter" data-level="5.12.3" data-path="data-wrangling.html"><a href="data-wrangling.html#recoding-variables"><i class="fa fa-check"></i><b>5.12.3</b> Recoding variables</a></li>
<li class="chapter" data-level="5.12.4" data-path="data-wrangling.html"><a href="data-wrangling.html#changing-the-level-of-categorical-variable"><i class="fa fa-check"></i><b>5.12.4</b> Changing the level of categorical variable</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="data-wrangling.html"><a href="data-wrangling.html#summary"><i class="fa fa-check"></i><b>5.13</b> Summary</a></li>
<li class="chapter" data-level="5.14" data-path="data-wrangling.html"><a href="data-wrangling.html#self-practice"><i class="fa fa-check"></i><b>5.14</b> Self-practice</a></li>
<li class="chapter" data-level="5.15" data-path="data-wrangling.html"><a href="data-wrangling.html#references"><i class="fa fa-check"></i><b>5.15</b> References</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>6</b> R Markdown</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-markdown.html"><a href="r-markdown.html#motivation"><i class="fa fa-check"></i><b>6.1</b> Motivation</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>6.1.1</b> What is R Markdown?</a></li>
<li class="chapter" data-level="6.1.2" data-path="r-markdown.html"><a href="r-markdown.html#why-should-we-bother-learning-r-markdown"><i class="fa fa-check"></i><b>6.1.2</b> Why should we bother learning R Markdown?</a></li>
<li class="chapter" data-level="6.1.3" data-path="r-markdown.html"><a href="r-markdown.html#sources-to-learn-r-markdown"><i class="fa fa-check"></i><b>6.1.3</b> Sources to learn R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>6.2</b> R Markdown Basics</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="r-markdown.html"><a href="r-markdown.html#install-rmarkdown-package"><i class="fa fa-check"></i><b>6.2.1</b> Install <code>rmarkdown</code> package</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-markdown.html"><a href="r-markdown.html#install-latex-package-for-pdf"><i class="fa fa-check"></i><b>6.2.2</b> Install LaTeX package for PDF</a></li>
<li class="chapter" data-level="6.2.3" data-path="r-markdown.html"><a href="r-markdown.html#new-.rmd-file"><i class="fa fa-check"></i><b>6.2.3</b> New .Rmd file</a></li>
<li class="chapter" data-level="6.2.4" data-path="r-markdown.html"><a href="r-markdown.html#knit-it"><i class="fa fa-check"></i><b>6.2.4</b> Knit it!</a></li>
<li class="chapter" data-level="6.2.5" data-path="r-markdown.html"><a href="r-markdown.html#yaml-header"><i class="fa fa-check"></i><b>6.2.5</b> YAML header</a></li>
<li class="chapter" data-level="6.2.6" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>6.2.6</b> Code chunks</a></li>
<li class="chapter" data-level="6.2.7" data-path="r-markdown.html"><a href="r-markdown.html#header-levels"><i class="fa fa-check"></i><b>6.2.7</b> Header levels</a></li>
<li class="chapter" data-level="6.2.8" data-path="r-markdown.html"><a href="r-markdown.html#exercise-1"><i class="fa fa-check"></i><b>6.2.8</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-markdown.html"><a href="r-markdown.html#table"><i class="fa fa-check"></i><b>6.3</b> Table</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="r-markdown.html"><a href="r-markdown.html#basic-table"><i class="fa fa-check"></i><b>6.3.1</b> Basic table</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-markdown.html"><a href="r-markdown.html#table-from-data-frame"><i class="fa fa-check"></i><b>6.3.2</b> Table (from data frame)</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-markdown.html"><a href="r-markdown.html#more-on-table"><i class="fa fa-check"></i><b>6.3.3</b> More on table</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="r-markdown.html"><a href="r-markdown.html#plot-figure-and-image"><i class="fa fa-check"></i><b>6.4</b> Plot, figure and image</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="r-markdown.html"><a href="r-markdown.html#plot-caption-fig.cap"><i class="fa fa-check"></i><b>6.4.1</b> Plot caption – <code>fig.cap</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="r-markdown.html"><a href="r-markdown.html#plot-size-fig.heightin-inch"><i class="fa fa-check"></i><b>6.4.2</b> Plot size – <code>fig.height</code>(in inch)</a></li>
<li class="chapter" data-level="6.4.3" data-path="r-markdown.html"><a href="r-markdown.html#plot-size-fig.width-in-inch"><i class="fa fa-check"></i><b>6.4.3</b> Plot size – <code>fig.width</code> (in inch)</a></li>
<li class="chapter" data-level="6.4.4" data-path="r-markdown.html"><a href="r-markdown.html#plot-aspect-ratio-fig.asp"><i class="fa fa-check"></i><b>6.4.4</b> Plot aspect ratio – <code>fig.asp</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="r-markdown.html"><a href="r-markdown.html#image"><i class="fa fa-check"></i><b>6.5</b> Image</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="r-markdown.html"><a href="r-markdown.html#exercise-2"><i class="fa fa-check"></i><b>6.5.1</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="r-markdown.html"><a href="r-markdown.html#inline-output"><i class="fa fa-check"></i><b>6.6</b> Inline output</a></li>
<li class="chapter" data-level="6.7" data-path="r-markdown.html"><a href="r-markdown.html#equation"><i class="fa fa-check"></i><b>6.7</b> Equation</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="r-markdown.html"><a href="r-markdown.html#mathematical-equation"><i class="fa fa-check"></i><b>6.7.1</b> Mathematical equation</a></li>
<li class="chapter" data-level="6.7.2" data-path="r-markdown.html"><a href="r-markdown.html#inline-equation"><i class="fa fa-check"></i><b>6.7.2</b> Inline equation</a></li>
<li class="chapter" data-level="6.7.3" data-path="r-markdown.html"><a href="r-markdown.html#display-equation"><i class="fa fa-check"></i><b>6.7.3</b> Display equation</a></li>
<li class="chapter" data-level="6.7.4" data-path="r-markdown.html"><a href="r-markdown.html#exercise-3"><i class="fa fa-check"></i><b>6.7.4</b> Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html"><i class="fa fa-check"></i><b>7</b> Exploratory data analysis (EDA)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#motivation-1"><i class="fa fa-check"></i><b>7.1</b> Motivation</a></li>
<li class="chapter" data-level="7.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#questions-to-ask-before-making-graphs"><i class="fa fa-check"></i><b>7.2</b> Questions to ask before making graphs</a></li>
<li class="chapter" data-level="7.3" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#eda-using-ggplot2-package"><i class="fa fa-check"></i><b>7.3</b> EDA using ggplot2 package</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#usage-of-ggplot2"><i class="fa fa-check"></i><b>7.3.1</b> Usage of <strong>ggplot2</strong></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#loading-the-library"><i class="fa fa-check"></i><b>7.4</b> Loading the library</a></li>
<li class="chapter" data-level="7.5" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#the-dataset"><i class="fa fa-check"></i><b>7.5</b> The dataset</a></li>
<li class="chapter" data-level="7.6" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>7.6</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#statistics"><i class="fa fa-check"></i><b>7.6.1</b> Statistics</a></li>
<li class="chapter" data-level="7.6.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#plots"><i class="fa fa-check"></i><b>7.6.2</b> Plots</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#one-variable-distribution-of-a-categorical-variable"><i class="fa fa-check"></i><b>7.7</b> One variable: Distribution of a categorical variable</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#bar-chart"><i class="fa fa-check"></i><b>7.7.1</b> Bar chart</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#one-variable-distribution-of-a-numerical-variable"><i class="fa fa-check"></i><b>7.8</b> One variable: Distribution of a numerical variable</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#histogram"><i class="fa fa-check"></i><b>7.8.1</b> Histogram</a></li>
<li class="chapter" data-level="7.8.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#density-curve"><i class="fa fa-check"></i><b>7.8.2</b> Density curve</a></li>
<li class="chapter" data-level="7.8.3" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#histogram-and-density-curve-together"><i class="fa fa-check"></i><b>7.8.3</b> Histogram and density curve together</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#two-variables-plotting-a-numerical-and-a-categorical-variable"><i class="fa fa-check"></i><b>7.9</b> Two variables: Plotting a numerical and a categorical variable</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#overlaying-histogramss-and-boxplot"><i class="fa fa-check"></i><b>7.9.1</b> Overlaying histogramss and boxplot</a></li>
<li class="chapter" data-level="7.9.2" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#faceting-the-plots"><i class="fa fa-check"></i><b>7.9.2</b> Faceting the plots</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#line-plot"><i class="fa fa-check"></i><b>7.10</b> Line plot</a></li>
<li class="chapter" data-level="7.11" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#plotting-means-and-error-bars"><i class="fa fa-check"></i><b>7.11</b> Plotting means and error bars</a></li>
<li class="chapter" data-level="7.12" data-path="exploratory-data-analysis-eda.html"><a href="exploratory-data-analysis-eda.html#scatterplot-with-fit-line"><i class="fa fa-check"></i><b>7.12</b> Scatterplot with fit line</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i><b>8</b> Linear Regression</a>
<ul>
<li class="chapter" data-level="8.1" data-path="linear-regression.html"><a href="linear-regression.html#simple-linear-regression-slr"><i class="fa fa-check"></i><b>8.1</b> Simple linear regression (SLR)</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="linear-regression.html"><a href="linear-regression.html#about-slr"><i class="fa fa-check"></i><b>8.1.1</b> About SLR</a></li>
<li class="chapter" data-level="8.1.2" data-path="linear-regression.html"><a href="linear-regression.html#analysis"><i class="fa fa-check"></i><b>8.1.2</b> Analysis</a></li>
<li class="chapter" data-level="8.1.3" data-path="linear-regression.html"><a href="linear-regression.html#data-exploration"><i class="fa fa-check"></i><b>8.1.3</b> Data exploration</a></li>
<li class="chapter" data-level="8.1.4" data-path="linear-regression.html"><a href="linear-regression.html#univariable"><i class="fa fa-check"></i><b>8.1.4</b> Univariable</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="linear-regression.html"><a href="linear-regression.html#multiple-linear-regression-mlr"><i class="fa fa-check"></i><b>8.2</b> Multiple linear regression (MLR)</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="linear-regression.html"><a href="linear-regression.html#about-mlr"><i class="fa fa-check"></i><b>8.2.1</b> About MLR</a></li>
<li class="chapter" data-level="8.2.2" data-path="linear-regression.html"><a href="linear-regression.html#analysis-1"><i class="fa fa-check"></i><b>8.2.2</b> Analysis</a></li>
<li class="chapter" data-level="8.2.3" data-path="linear-regression.html"><a href="linear-regression.html#multicollinearity-mc"><i class="fa fa-check"></i><b>8.2.3</b> Multicollinearity, MC</a></li>
<li class="chapter" data-level="8.2.4" data-path="linear-regression.html"><a href="linear-regression.html#interaction"><i class="fa fa-check"></i><b>8.2.4</b> Interaction, *</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="linear-regression.html"><a href="linear-regression.html#model-fit-assessment-residuals"><i class="fa fa-check"></i><b>8.3</b> Model fit assessment: Residuals</a>
<ul>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#histogram-1"><i class="fa fa-check"></i>Histogram</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#scatter-plots"><i class="fa fa-check"></i>Scatter plots</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="linear-regression.html"><a href="linear-regression.html#interpretation-1"><i class="fa fa-check"></i><b>8.4</b> Interpretation</a></li>
<li class="chapter" data-level="8.5" data-path="linear-regression.html"><a href="linear-regression.html#model-equation-1"><i class="fa fa-check"></i><b>8.5</b> Model equation</a></li>
<li class="chapter" data-level="8.6" data-path="linear-regression.html"><a href="linear-regression.html#prediction"><i class="fa fa-check"></i><b>8.6</b> Prediction</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html"><i class="fa fa-check"></i><b>9</b> Binary Logistic Regression</a>
<ul>
<li class="chapter" data-level="9.1" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#introduction-1"><i class="fa fa-check"></i><b>9.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#background"><i class="fa fa-check"></i><b>9.1.1</b> Background</a></li>
<li class="chapter" data-level="9.1.2" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#objectives-1"><i class="fa fa-check"></i><b>9.1.2</b> Objectives</a></li>
<li class="chapter" data-level="9.1.3" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#further-readings"><i class="fa fa-check"></i><b>9.1.3</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#dataset"><i class="fa fa-check"></i><b>9.2</b> Dataset</a></li>
<li class="chapter" data-level="9.3" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#the-logit-and-logistic-models"><i class="fa fa-check"></i><b>9.3</b> The logit and logistic models</a></li>
<li class="chapter" data-level="9.4" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#prepare-environment-for-analysis"><i class="fa fa-check"></i><b>9.4</b> Prepare environment for analysis</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#creating-a-rstudio-project"><i class="fa fa-check"></i><b>9.4.1</b> Creating a RStudio project</a></li>
<li class="chapter" data-level="9.4.2" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#loading-libraries"><i class="fa fa-check"></i><b>9.4.2</b> Loading libraries</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#read-data-1"><i class="fa fa-check"></i><b>9.5</b> Read data</a></li>
<li class="chapter" data-level="9.6" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#explore-data"><i class="fa fa-check"></i><b>9.6</b> Explore data</a></li>
<li class="chapter" data-level="9.7" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#estimate-the-regression-parameters"><i class="fa fa-check"></i><b>9.7</b> Estimate the regression parameters</a></li>
<li class="chapter" data-level="9.8" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#simple-binary-logistic-regression"><i class="fa fa-check"></i><b>9.8</b> Simple binary logistic regression</a></li>
<li class="chapter" data-level="9.9" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#multiple-binary-logistic-regression"><i class="fa fa-check"></i><b>9.9</b> Multiple binary logistic regression</a></li>
<li class="chapter" data-level="9.10" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#convert-the-log-odds-to-odds-ratio"><i class="fa fa-check"></i><b>9.10</b> Convert the log odds to odds ratio</a></li>
<li class="chapter" data-level="9.11" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#making-inference"><i class="fa fa-check"></i><b>9.11</b> Making inference</a></li>
<li class="chapter" data-level="9.12" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#model-comparison"><i class="fa fa-check"></i><b>9.12</b> Model comparison</a></li>
<li class="chapter" data-level="9.13" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#adding-an-interaction-term"><i class="fa fa-check"></i><b>9.13</b> Adding an interaction term</a></li>
<li class="chapter" data-level="9.14" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#prediction-from-binary-logistic-regression"><i class="fa fa-check"></i><b>9.14</b> Prediction from binary logistic regression</a>
<ul>
<li class="chapter" data-level="9.14.1" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#predict-the-log-odds"><i class="fa fa-check"></i><b>9.14.1</b> Predict the log odds</a></li>
<li class="chapter" data-level="9.14.2" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#predict-the-probabilities"><i class="fa fa-check"></i><b>9.14.2</b> Predict the probabilities</a></li>
</ul></li>
<li class="chapter" data-level="9.15" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#model-fitness"><i class="fa fa-check"></i><b>9.15</b> Model fitness</a></li>
<li class="chapter" data-level="9.16" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#presentation"><i class="fa fa-check"></i><b>9.16</b> Presentation</a></li>
<li class="chapter" data-level="9.17" data-path="binary-logistic-regression.html"><a href="binary-logistic-regression.html#references-1"><i class="fa fa-check"></i><b>9.17</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="poisson-regression.html"><a href="poisson-regression.html"><i class="fa fa-check"></i><b>10</b> Poisson Regression</a>
<ul>
<li class="chapter" data-level="10.1" data-path="poisson-regression.html"><a href="poisson-regression.html#introduction-2"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="poisson-regression.html"><a href="poisson-regression.html#preliminaries"><i class="fa fa-check"></i><b>10.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="poisson-regression.html"><a href="poisson-regression.html#load-libraries"><i class="fa fa-check"></i><b>10.2.1</b> Load libraries</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="poisson-regression.html"><a href="poisson-regression.html#simple-poisson-regression-models"><i class="fa fa-check"></i><b>10.3</b> Simple Poisson regression models</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="poisson-regression.html"><a href="poisson-regression.html#count-data"><i class="fa fa-check"></i><b>10.3.1</b> Count data</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="poisson-regression.html"><a href="poisson-regression.html#rate-data"><i class="fa fa-check"></i><b>10.4</b> Rate data</a></li>
<li class="chapter" data-level="10.5" data-path="poisson-regression.html"><a href="poisson-regression.html#multiple-poisson-regression-model"><i class="fa fa-check"></i><b>10.5</b> Multiple Poisson regression model</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="poisson-regression.html"><a href="poisson-regression.html#univariable-1"><i class="fa fa-check"></i><b>10.5.1</b> Univariable</a></li>
<li class="chapter" data-level="10.5.2" data-path="poisson-regression.html"><a href="poisson-regression.html#multivariable-1"><i class="fa fa-check"></i><b>10.5.2</b> Multivariable</a></li>
<li class="chapter" data-level="10.5.3" data-path="poisson-regression.html"><a href="poisson-regression.html#interaction-1"><i class="fa fa-check"></i><b>10.5.3</b> Interaction</a></li>
<li class="chapter" data-level="10.5.4" data-path="poisson-regression.html"><a href="poisson-regression.html#final-model"><i class="fa fa-check"></i><b>10.5.4</b> Final model</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="poisson-regression.html"><a href="poisson-regression.html#references-2"><i class="fa fa-check"></i><b>10.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="survival-analysis.html"><a href="survival-analysis.html"><i class="fa fa-check"></i><b>11</b> Survival Analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="survival-analysis.html"><a href="survival-analysis.html#introduction-3"><i class="fa fa-check"></i><b>11.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="survival-analysis.html"><a href="survival-analysis.html#background-1"><i class="fa fa-check"></i><b>11.1.1</b> Background</a></li>
<li class="chapter" data-level="11.1.2" data-path="survival-analysis.html"><a href="survival-analysis.html#types-of-survival-analysis"><i class="fa fa-check"></i><b>11.1.2</b> Types of survival analysis</a></li>
<li class="chapter" data-level="11.1.3" data-path="survival-analysis.html"><a href="survival-analysis.html#objectives-2"><i class="fa fa-check"></i><b>11.1.3</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="survival-analysis.html"><a href="survival-analysis.html#prepare-environment-for-analysis-1"><i class="fa fa-check"></i><b>11.2</b> Prepare environment for analysis</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="survival-analysis.html"><a href="survival-analysis.html#rstudio-project-1"><i class="fa fa-check"></i><b>11.2.1</b> RStudio project</a></li>
<li class="chapter" data-level="11.2.2" data-path="survival-analysis.html"><a href="survival-analysis.html#packages-1"><i class="fa fa-check"></i><b>11.2.2</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="survival-analysis.html"><a href="survival-analysis.html#data"><i class="fa fa-check"></i><b>11.3</b> Data</a></li>
<li class="chapter" data-level="11.4" data-path="survival-analysis.html"><a href="survival-analysis.html#exploratory-data"><i class="fa fa-check"></i><b>11.4</b> Exploratory data</a></li>
<li class="chapter" data-level="11.5" data-path="survival-analysis.html"><a href="survival-analysis.html#kaplan-meier-survival-estimates"><i class="fa fa-check"></i><b>11.5</b> Kaplan-Meier survival estimates</a></li>
<li class="chapter" data-level="11.6" data-path="survival-analysis.html"><a href="survival-analysis.html#plot-the-survival-probability"><i class="fa fa-check"></i><b>11.6</b> Plot the survival probability</a></li>
<li class="chapter" data-level="11.7" data-path="survival-analysis.html"><a href="survival-analysis.html#comparing-kaplan-meier-estimates-across-groups"><i class="fa fa-check"></i><b>11.7</b> Comparing Kaplan-Meier estimates across groups</a>
<ul>
<li class="chapter" data-level="11.7.1" data-path="survival-analysis.html"><a href="survival-analysis.html#log-rank-test"><i class="fa fa-check"></i><b>11.7.1</b> Log-rank test</a></li>
<li class="chapter" data-level="11.7.2" data-path="survival-analysis.html"><a href="survival-analysis.html#peto-peto-test"><i class="fa fa-check"></i><b>11.7.2</b> peto-peto test</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="survival-analysis.html"><a href="survival-analysis.html#semi-parametric-models-in-survival-analysis"><i class="fa fa-check"></i><b>11.8</b> Semi-parametric models in survival analysis</a>
<ul>
<li class="chapter" data-level="11.8.1" data-path="survival-analysis.html"><a href="survival-analysis.html#cox-proportional-hazard-regression"><i class="fa fa-check"></i><b>11.8.1</b> Cox proportional hazard regression</a></li>
<li class="chapter" data-level="11.8.2" data-path="survival-analysis.html"><a href="survival-analysis.html#advantages-of-the-cox-proportional-hazard-regression"><i class="fa fa-check"></i><b>11.8.2</b> Advantages of the Cox proportional hazard regression</a></li>
</ul></li>
<li class="chapter" data-level="11.9" data-path="survival-analysis.html"><a href="survival-analysis.html#estimation-from-cox-proportional-hazards-regression"><i class="fa fa-check"></i><b>11.9</b> Estimation from Cox proportional hazards regression</a>
<ul>
<li class="chapter" data-level="11.9.1" data-path="survival-analysis.html"><a href="survival-analysis.html#simple-cox-ph-regression"><i class="fa fa-check"></i><b>11.9.1</b> Simple Cox PH regression</a></li>
<li class="chapter" data-level="11.9.2" data-path="survival-analysis.html"><a href="survival-analysis.html#multiple-cox-ph-regression"><i class="fa fa-check"></i><b>11.9.2</b> Multiple Cox PH regression</a></li>
</ul></li>
<li class="chapter" data-level="11.10" data-path="survival-analysis.html"><a href="survival-analysis.html#inference"><i class="fa fa-check"></i><b>11.10</b> Inference</a></li>
<li class="chapter" data-level="11.11" data-path="survival-analysis.html"><a href="survival-analysis.html#adding-interaction-in-the-model"><i class="fa fa-check"></i><b>11.11</b> Adding interaction in the model</a></li>
<li class="chapter" data-level="11.12" data-path="survival-analysis.html"><a href="survival-analysis.html#the-proportional-hazard-assumption"><i class="fa fa-check"></i><b>11.12</b> The proportional hazard assumption</a>
<ul>
<li class="chapter" data-level="11.12.1" data-path="survival-analysis.html"><a href="survival-analysis.html#risk-constant-over-time"><i class="fa fa-check"></i><b>11.12.1</b> Risk constant over time</a></li>
<li class="chapter" data-level="11.12.2" data-path="survival-analysis.html"><a href="survival-analysis.html#test-for-ph-assumption"><i class="fa fa-check"></i><b>11.12.2</b> Test for PH assumption</a></li>
<li class="chapter" data-level="11.12.3" data-path="survival-analysis.html"><a href="survival-analysis.html#plots-to-assess-ph-assumption"><i class="fa fa-check"></i><b>11.12.3</b> Plots to assess PH assumption</a></li>
</ul></li>
<li class="chapter" data-level="11.13" data-path="survival-analysis.html"><a href="survival-analysis.html#model-checking"><i class="fa fa-check"></i><b>11.13</b> Model checking</a>
<ul>
<li class="chapter" data-level="11.13.1" data-path="survival-analysis.html"><a href="survival-analysis.html#prediction-from-cox-ph-model"><i class="fa fa-check"></i><b>11.13.1</b> Prediction from Cox PH model</a></li>
<li class="chapter" data-level="11.13.2" data-path="survival-analysis.html"><a href="survival-analysis.html#residuas-from-cox-ph-model"><i class="fa fa-check"></i><b>11.13.2</b> Residuas from Cox PH model</a></li>
<li class="chapter" data-level="11.13.3" data-path="survival-analysis.html"><a href="survival-analysis.html#influential-observations"><i class="fa fa-check"></i><b>11.13.3</b> Influential observations</a></li>
</ul></li>
<li class="chapter" data-level="11.14" data-path="survival-analysis.html"><a href="survival-analysis.html#plot-the-adjusted-survival"><i class="fa fa-check"></i><b>11.14</b> Plot the adjusted survival</a></li>
<li class="chapter" data-level="11.15" data-path="survival-analysis.html"><a href="survival-analysis.html#presentation-and-interpretation"><i class="fa fa-check"></i><b>11.15</b> Presentation and interpretation</a></li>
<li class="chapter" data-level="11.16" data-path="survival-analysis.html"><a href="survival-analysis.html#references-3"><i class="fa fa-check"></i><b>11.16</b> References</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="missing-data.html"><a href="missing-data.html"><i class="fa fa-check"></i><b>12</b> Missing data</a>
<ul>
<li class="chapter" data-level="12.1" data-path="missing-data.html"><a href="missing-data.html#introduction-4"><i class="fa fa-check"></i><b>12.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="missing-data.html"><a href="missing-data.html#background-2"><i class="fa fa-check"></i><b>12.1.1</b> Background</a></li>
<li class="chapter" data-level="12.1.2" data-path="missing-data.html"><a href="missing-data.html#objectives-3"><i class="fa fa-check"></i><b>12.1.2</b> Objectives</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="missing-data.html"><a href="missing-data.html#preliminaries-1"><i class="fa fa-check"></i><b>12.2</b> Preliminaries</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="missing-data.html"><a href="missing-data.html#packages-2"><i class="fa fa-check"></i><b>12.2.1</b> Packages</a></li>
<li class="chapter" data-level="12.2.2" data-path="missing-data.html"><a href="missing-data.html#dataset-1"><i class="fa fa-check"></i><b>12.2.2</b> Dataset</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="missing-data.html"><a href="missing-data.html#exploring-missing-data"><i class="fa fa-check"></i><b>12.3</b> Exploring missing data</a></li>
<li class="chapter" data-level="12.4" data-path="missing-data.html"><a href="missing-data.html#handling-missing-data"><i class="fa fa-check"></i><b>12.4</b> Handling missing data</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="missing-data.html"><a href="missing-data.html#listwise-deletion"><i class="fa fa-check"></i><b>12.4.1</b> Listwise deletion</a></li>
<li class="chapter" data-level="12.4.2" data-path="missing-data.html"><a href="missing-data.html#simple-imputation"><i class="fa fa-check"></i><b>12.4.2</b> Simple imputation</a></li>
<li class="chapter" data-level="12.4.3" data-path="missing-data.html"><a href="missing-data.html#single-imputation"><i class="fa fa-check"></i><b>12.4.3</b> Single imputation</a></li>
<li class="chapter" data-level="12.4.4" data-path="missing-data.html"><a href="missing-data.html#multiple-imputation"><i class="fa fa-check"></i><b>12.4.4</b> Multiple imputation</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="missing-data.html"><a href="missing-data.html#presentation-1"><i class="fa fa-check"></i><b>12.5</b> Presentation</a></li>
<li class="chapter" data-level="12.6" data-path="missing-data.html"><a href="missing-data.html#references-4"><i class="fa fa-check"></i><b>12.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-5.html"><a href="references-5.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis in Medicine and Health using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="survival-analysis" class="section level1" number="11">
<h1><span class="header-section-number">Chapter 11</span> Survival Analysis</h1>
<div id="introduction-3" class="section level2" number="11.1">
<h2><span class="header-section-number">11.1</span> Introduction</h2>
<div id="background-1" class="section level3" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> Background</h3>
<p>Regression concerns the relationship between a response variable and one or more exploratory variables. The independent variables are also called covariates. Some common regression analysis in health and medicine is linear regression, logistic regression, Poisson regression and Cox proportional hazard regression. Linear regression falls under the general linear model while the other three regression models fall under the generalized linear regression.</p>
<p>Survival analysis is also known as duration analysis or time-to-event analysis. This analysis is useful in follow up studies where participants or patients are followed-up until they develop the event of interest. Examples of such studies include the retrospective cohort or prospective cohort studies.</p>
<p>Sometime people confuse and wrongly think that the survival analysis is only applicable to the study of survival (where the event of interest is either alive or death condition). It is not. Any study that involves both the duration of follow up (in days or weeks or months) and the event of interest can be considered as suitable for survival analysis. So, survival or duration analysis is performed on data that has duration until an event occurs.</p>
<p>In health and medicine studies, this event can be of interest, for example:</p>
<ul>
<li>relapse after treatment</li>
<li>death after diagnosis</li>
<li>recurrence of disease</li>
<li>treatment success</li>
</ul>
<p>And for variable time, it can be in any time form such as days, weeks, years or event minutes. If we combine them together (with the event of interest) then it can become:</p>
<ul>
<li>months to relapse</li>
<li>years from diagnosis to death</li>
<li>weeks before recurrence</li>
<li>days taken from the start of treatment to treatment success</li>
</ul>
</div>
<div id="types-of-survival-analysis" class="section level3" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Types of survival analysis</h3>
<p>There are three main types of survival analysis:</p>
<ul>
<li>the non-parametric survival analysis for example Kaplan-Meier estimates.</li>
<li>the semi-parametric survival analysis for example Cox proportional hazard regression.</li>
<li>the parametric survival analysis for example Weibull parametric survival analysis.</li>
</ul>
<p>In medical literature, we usually perform the non-parametric analysis for example the Kaplan-Meier estimates at the beginning of the analysis to understand the trend of survival probabilities. Following that, we perform simple (univariable) or multiple (multivariable) Cox proportional hazard (PH) regression model. If we are sure with the distribution of the risk and aim to estimate the survival time, then we can perform parametric survival analysis.</p>
</div>
<div id="objectives-2" class="section level3" number="11.1.3">
<h3><span class="header-section-number">11.1.3</span> Objectives</h3>
<p>At the end of the chapter, the readers will be</p>
<ul>
<li>to perform Kaplan-Meier survival analysis</li>
<li>to perform the simple (univariable) Cox PH regression analysis</li>
<li>to perform the multiple (multivariable) Cox PH regression analysis</li>
</ul>
</div>
</div>
<div id="prepare-environment-for-analysis-1" class="section level2" number="11.2">
<h2><span class="header-section-number">11.2</span> Prepare environment for analysis</h2>
<div id="rstudio-project-1" class="section level3" number="11.2.1">
<h3><span class="header-section-number">11.2.1</span> RStudio project</h3>
<p>We recommend your start a new analysis project by creating a new RStudio project. To do this:</p>
<ol style="list-style-type: decimal">
<li>Go to File</li>
<li>Click New Project</li>
<li>Choose New Directory or Existing Directory.</li>
</ol>
<p>This directory actually a folder that should contain the R codes, the dataset and the outputs from the analysis. To organize further, we would create a folder and name it as <code>data</code> in the directory. And we will copy the dataset <code>stroke_data.csv</code> in the <code>data</code> folder.</p>
</div>
<div id="packages-1" class="section level3" number="11.2.2">
<h3><span class="header-section-number">11.2.2</span> Packages</h3>
<p>Next, we will load the necessary packages. We will use these packages:</p>
<ul>
<li><strong>gtsummary</strong>: a package that give us a nice formatted tables of statistics</li>
<li><strong>tidyverse</strong>: a package for data wrangling and making plots</li>
<li><strong>lubridate</strong> : a package to manipulate dates</li>
<li><strong>survival</strong>: a package to run survival analysis.</li>
<li><strong>survminer</strong>: a package to plot survival objects</li>
<li><strong>broom</strong>: a package to make prettier outputs</li>
<li><strong>here</strong> : a package to manage location fo files</li>
</ul>
<p>In addition to <strong>survival</strong> package, there are other packages that can perform survival analysis. The details of the package is available here <a href="https://cran.r-project.org/web/views/Survival.html" class="uri">https://cran.r-project.org/web/views/Survival.html</a>.</p>
<p>Now, we will load the packages:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="survival-analysis.html#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
<pre><code>## here() starts at C:/Tengku/Sync_PC_Laptop/tulis-buku/multivariable-analysis/fork-profKIM/multivar_data_analysis</code></pre>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="survival-analysis.html#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.1 --</code></pre>
<pre><code>## v ggplot2 3.3.5     v purrr   0.3.4
## v tibble  3.1.6     v dplyr   1.0.7
## v tidyr   1.1.4     v stringr 1.4.0
## v readr   2.1.1     v forcats 0.5.1</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 4.1.2</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="survival-analysis.html#cb517-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="survival-analysis.html#cb520-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb520-2"><a href="survival-analysis.html#cb520-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span></code></pre></div>
<pre><code>## Warning: package &#39;survminer&#39; was built under R version 4.1.2</code></pre>
<pre><code>## Loading required package: ggpubr</code></pre>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="survival-analysis.html#cb523-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb523-2"><a href="survival-analysis.html#cb523-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span></code></pre></div>
<p>Remember, check if all packages are available in your R library. If not, you will receive an error message stating that the package is not available. To install the package, use the <code>install.packages()</code> function. It will download and install the packages to your R libraries. Once the packages are installed, load the packages again using the <code>library()</code> function.</p>
</div>
</div>
<div id="data" class="section level2" number="11.3">
<h2><span class="header-section-number">11.3</span> Data</h2>
<p>The tutorial uses a dataset named <code>stroke_data.csv</code>. This is comma-separated value dataset. Now let us load the data</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="survival-analysis.html#cb524-1" aria-hidden="true" tabindex="-1"></a>stroke <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&#39;data&#39;</span>, <span class="st">&#39;stroke_data.csv&#39;</span>))</span></code></pre></div>
<pre><code>## Rows: 213 Columns: 12</code></pre>
<pre><code>## -- Column specification --------------------------------------------------------
## Delimiter: &quot;,&quot;
## chr (7): doa, dod, status, sex, dm, stroke_type, referral_from
## dbl (5): gcs, sbp, dbp, wbc, time2</code></pre>
<pre><code>## 
## i Use `spec()` to retrieve the full column specification for this data.
## i Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>And take a peek at our data to check</p>
<ul>
<li>number of observations (n=213)</li>
<li>name of variables (12 variables)</li>
<li>type of variables (character and double)</li>
</ul>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="survival-analysis.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(stroke)</span></code></pre></div>
<pre><code>## Rows: 213
## Columns: 12
## $ doa           &lt;chr&gt; &quot;17/2/2011&quot;, &quot;20/3/2011&quot;, &quot;9/4/2011&quot;, &quot;12/4/2011&quot;, &quot;12/4~
## $ dod           &lt;chr&gt; &quot;18/2/2011&quot;, &quot;21/3/2011&quot;, &quot;10/4/2011&quot;, &quot;13/4/2011&quot;, &quot;13/~
## $ status        &lt;chr&gt; &quot;alive&quot;, &quot;alive&quot;, &quot;dead&quot;, &quot;dead&quot;, &quot;alive&quot;, &quot;dead&quot;, &quot;aliv~
## $ sex           &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;m~
## $ dm            &lt;chr&gt; &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;yes&quot;, &quot;no&quot;, &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;,~
## $ gcs           &lt;dbl&gt; 15, 15, 11, 3, 15, 3, 11, 15, 6, 15, 15, 4, 4, 10, 12, 1~
## $ sbp           &lt;dbl&gt; 151, 196, 126, 170, 103, 91, 171, 106, 170, 123, 144, 23~
## $ dbp           &lt;dbl&gt; 73, 123, 78, 103, 62, 55, 80, 67, 90, 83, 89, 120, 120, ~
## $ wbc           &lt;dbl&gt; 12.5, 8.1, 15.3, 13.9, 14.7, 14.2, 8.7, 5.5, 10.5, 7.2, ~
## $ time2         &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,~
## $ stroke_type   &lt;chr&gt; &quot;IS&quot;, &quot;IS&quot;, &quot;HS&quot;, &quot;IS&quot;, &quot;IS&quot;, &quot;HS&quot;, &quot;IS&quot;, &quot;IS&quot;, &quot;HS&quot;, &quot;I~
## $ referral_from &lt;chr&gt; &quot;non-hospital&quot;, &quot;non-hospital&quot;, &quot;hospital&quot;, &quot;hospital&quot;, ~</code></pre>
<p>These data come from patients who were admitted at a tertiary hospital due to acute stroke. They were treated in the ward and the status (dead or alive) were recorded. The variables are:</p>
<ul>
<li>doa : date of admission<br />
</li>
<li>dod : date of discharge</li>
<li>status : event at discharge (alive or dead)<br />
</li>
<li>sex : male or female<br />
</li>
<li>dm : diabetes (yes or no)<br />
</li>
<li>gcs : Glasgow Coma Scale (value from 3 to 15)<br />
</li>
<li>sbp : Systolic blood pressure (mmHg)<br />
</li>
<li>dbp : Diastolic blood pressure (mmHg)<br />
</li>
<li>wbc : Total white cell count<br />
</li>
<li>time2 : days in ward<br />
</li>
<li>stroke_type : stroke type (Ischaemic stroke or Haemorrhagic stroke)<br />
</li>
<li>referral_from : patient was referred from a hospital or not from a hospital</li>
</ul>
<p>The outcome of interest is time from admission to death. The time variable is <code>time2</code> (in days) and the event variable is <code>status</code>. The event of interest is <code>dead</code>. We also note that variables dates and other categorical variables are in character format. The rest are in numerical format.</p>
</div>
<div id="exploratory-data" class="section level2" number="11.4">
<h2><span class="header-section-number">11.4</span> Exploratory data</h2>
<p>We will convert the variables doa and doa to a more valid format that is date:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="survival-analysis.html#cb530-1" aria-hidden="true" tabindex="-1"></a>stroke <span class="ot">&lt;-</span> </span>
<span id="cb530-2"><a href="survival-analysis.html#cb530-2" aria-hidden="true" tabindex="-1"></a>  stroke <span class="sc">%&gt;%</span></span>
<span id="cb530-3"><a href="survival-analysis.html#cb530-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">doa =</span> <span class="fu">dmy</span>(doa),</span>
<span id="cb530-4"><a href="survival-analysis.html#cb530-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">dod =</span> <span class="fu">dmy</span>(dod))</span></code></pre></div>
<p>We will perform a quick preliminary analysis. First, by looking at the summary statistics:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="survival-analysis.html#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stroke)</span></code></pre></div>
<pre><code>##       doa                  dod                status         
##  Min.   :2011-01-01   Min.   :2011-01-05   Length:213        
##  1st Qu.:2011-06-06   1st Qu.:2011-06-09   Class :character  
##  Median :2011-10-31   Median :2011-11-02   Mode  :character  
##  Mean   :2011-10-16   Mean   :2011-10-23                     
##  3rd Qu.:2012-03-12   3rd Qu.:2012-03-18                     
##  Max.   :2012-06-23   Max.   :2012-06-27                     
##      sex                 dm                 gcs             sbp       
##  Length:213         Length:213         Min.   : 3.00   Min.   : 75.0  
##  Class :character   Class :character   1st Qu.:10.00   1st Qu.:142.0  
##  Mode  :character   Mode  :character   Median :15.00   Median :160.0  
##                                        Mean   :12.52   Mean   :162.8  
##                                        3rd Qu.:15.00   3rd Qu.:186.0  
##                                        Max.   :15.00   Max.   :290.0  
##       dbp              wbc           time2        stroke_type       
##  Min.   : 42.00   Min.   : 4.2   Min.   : 1.000   Length:213        
##  1st Qu.: 79.00   1st Qu.: 7.5   1st Qu.: 3.000   Class :character  
##  Median : 90.00   Median : 9.9   Median : 4.000   Mode  :character  
##  Mean   : 91.53   Mean   :10.4   Mean   : 6.474                     
##  3rd Qu.:103.00   3rd Qu.:12.5   3rd Qu.: 7.000                     
##  Max.   :160.00   Max.   :27.0   Max.   :43.000                     
##  referral_from     
##  Length:213        
##  Class :character  
##  Mode  :character  
##                    
##                    
## </code></pre>
<p>The <code>tbl_summary()</code> function from <strong>gtsummary</strong> package can produce nice tables. For example, the overall characteristics of patients can be obtained by:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="survival-analysis.html#cb533-1" aria-hidden="true" tabindex="-1"></a>stroke <span class="sc">%&gt;%</span></span>
<span id="cb533-2"><a href="survival-analysis.html#cb533-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>()</span></code></pre></div>
<div id="tluqhdhyhj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#tluqhdhyhj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#tluqhdhyhj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tluqhdhyhj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#tluqhdhyhj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#tluqhdhyhj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tluqhdhyhj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#tluqhdhyhj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#tluqhdhyhj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#tluqhdhyhj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#tluqhdhyhj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#tluqhdhyhj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#tluqhdhyhj .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#tluqhdhyhj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#tluqhdhyhj .gt_from_md > :first-child {
  margin-top: 0;
}

#tluqhdhyhj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#tluqhdhyhj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#tluqhdhyhj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#tluqhdhyhj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tluqhdhyhj .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#tluqhdhyhj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#tluqhdhyhj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#tluqhdhyhj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#tluqhdhyhj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#tluqhdhyhj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tluqhdhyhj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#tluqhdhyhj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#tluqhdhyhj .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#tluqhdhyhj .gt_left {
  text-align: left;
}

#tluqhdhyhj .gt_center {
  text-align: center;
}

#tluqhdhyhj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#tluqhdhyhj .gt_font_normal {
  font-weight: normal;
}

#tluqhdhyhj .gt_font_bold {
  font-weight: bold;
}

#tluqhdhyhj .gt_font_italic {
  font-style: italic;
}

#tluqhdhyhj .gt_super {
  font-size: 65%;
}

#tluqhdhyhj .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N = 213</strong><sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">doa</td>
<td class="gt_row gt_center">2011-01-01 to 2012-06-23</td></tr>
    <tr><td class="gt_row gt_left">dod</td>
<td class="gt_row gt_center">2011-01-05 to 2012-06-27</td></tr>
    <tr><td class="gt_row gt_left">status</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">alive</td>
<td class="gt_row gt_center">165 (77%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">dead</td>
<td class="gt_row gt_center">48 (23%)</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
<td class="gt_row gt_center">122 (57%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
<td class="gt_row gt_center">91 (43%)</td></tr>
    <tr><td class="gt_row gt_left">dm</td>
<td class="gt_row gt_center">72 (34%)</td></tr>
    <tr><td class="gt_row gt_left">gcs</td>
<td class="gt_row gt_center">15.0 (10.0, 15.0)</td></tr>
    <tr><td class="gt_row gt_left">sbp</td>
<td class="gt_row gt_center">160 (142, 186)</td></tr>
    <tr><td class="gt_row gt_left">dbp</td>
<td class="gt_row gt_center">90 (79, 103)</td></tr>
    <tr><td class="gt_row gt_left">wbc</td>
<td class="gt_row gt_center">9.9 (7.5, 12.5)</td></tr>
    <tr><td class="gt_row gt_left">time2</td>
<td class="gt_row gt_center">4 (3, 7)</td></tr>
    <tr><td class="gt_row gt_left">stroke_type</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">HS</td>
<td class="gt_row gt_center">69 (32%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">IS</td>
<td class="gt_row gt_center">144 (68%)</td></tr>
    <tr><td class="gt_row gt_left">referral_from</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">hospital</td>
<td class="gt_row gt_center">80 (38%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">non-hospital</td>
<td class="gt_row gt_center">133 (62%)</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="2">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          Range; n (%); Median (IQR)
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
<p>To obtain the patients characteristics based on status:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="survival-analysis.html#cb534-1" aria-hidden="true" tabindex="-1"></a>stroke <span class="sc">%&gt;%</span> </span>
<span id="cb534-2"><a href="survival-analysis.html#cb534-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> status)</span></code></pre></div>
<div id="nnplquzljm" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#nnplquzljm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nnplquzljm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nnplquzljm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nnplquzljm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nnplquzljm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nnplquzljm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nnplquzljm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nnplquzljm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nnplquzljm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nnplquzljm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nnplquzljm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nnplquzljm .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#nnplquzljm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nnplquzljm .gt_from_md > :first-child {
  margin-top: 0;
}

#nnplquzljm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nnplquzljm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nnplquzljm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#nnplquzljm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nnplquzljm .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#nnplquzljm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nnplquzljm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nnplquzljm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nnplquzljm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nnplquzljm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nnplquzljm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#nnplquzljm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nnplquzljm .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#nnplquzljm .gt_left {
  text-align: left;
}

#nnplquzljm .gt_center {
  text-align: center;
}

#nnplquzljm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nnplquzljm .gt_font_normal {
  font-weight: normal;
}

#nnplquzljm .gt_font_bold {
  font-weight: bold;
}

#nnplquzljm .gt_font_italic {
  font-style: italic;
}

#nnplquzljm .gt_super {
  font-size: 65%;
}

#nnplquzljm .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>alive</strong>, N = 165<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>dead</strong>, N = 48<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">doa</td>
<td class="gt_row gt_center">2011-01-03 to 2012-06-22</td>
<td class="gt_row gt_center">2011-01-01 to 2012-06-23</td></tr>
    <tr><td class="gt_row gt_left">dod</td>
<td class="gt_row gt_center">2011-01-06 to 2012-06-27</td>
<td class="gt_row gt_center">2011-01-05 to 2012-06-26</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
<td class="gt_row gt_center">87 (53%)</td>
<td class="gt_row gt_center">35 (73%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
<td class="gt_row gt_center">78 (47%)</td>
<td class="gt_row gt_center">13 (27%)</td></tr>
    <tr><td class="gt_row gt_left">dm</td>
<td class="gt_row gt_center">59 (36%)</td>
<td class="gt_row gt_center">13 (27%)</td></tr>
    <tr><td class="gt_row gt_left">gcs</td>
<td class="gt_row gt_center">15.0 (14.0, 15.0)</td>
<td class="gt_row gt_center">8.5 (5.0, 11.2)</td></tr>
    <tr><td class="gt_row gt_left">sbp</td>
<td class="gt_row gt_center">160 (143, 186)</td>
<td class="gt_row gt_center">162 (137, 192)</td></tr>
    <tr><td class="gt_row gt_left">dbp</td>
<td class="gt_row gt_center">90 (79, 102)</td>
<td class="gt_row gt_center">90 (80, 109)</td></tr>
    <tr><td class="gt_row gt_left">wbc</td>
<td class="gt_row gt_center">9.0 (7.2, 11.6)</td>
<td class="gt_row gt_center">11.4 (10.0, 14.5)</td></tr>
    <tr><td class="gt_row gt_left">time2</td>
<td class="gt_row gt_center">4 (3, 6)</td>
<td class="gt_row gt_center">5 (2, 12)</td></tr>
    <tr><td class="gt_row gt_left">stroke_type</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">HS</td>
<td class="gt_row gt_center">38 (23%)</td>
<td class="gt_row gt_center">31 (65%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">IS</td>
<td class="gt_row gt_center">127 (77%)</td>
<td class="gt_row gt_center">17 (35%)</td></tr>
    <tr><td class="gt_row gt_left">referral_from</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">hospital</td>
<td class="gt_row gt_center">51 (31%)</td>
<td class="gt_row gt_center">29 (60%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">non-hospital</td>
<td class="gt_row gt_center">114 (69%)</td>
<td class="gt_row gt_center">19 (40%)</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="3">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          Range; n (%); Median (IQR)
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
<p>To obtain the patients characteristics based on stroke types:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="survival-analysis.html#cb535-1" aria-hidden="true" tabindex="-1"></a>stroke <span class="sc">%&gt;%</span> </span>
<span id="cb535-2"><a href="survival-analysis.html#cb535-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_summary</span>(<span class="at">by =</span> stroke_type)</span></code></pre></div>
<div id="gcsabxjcyp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#gcsabxjcyp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gcsabxjcyp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gcsabxjcyp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gcsabxjcyp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gcsabxjcyp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gcsabxjcyp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gcsabxjcyp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gcsabxjcyp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gcsabxjcyp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gcsabxjcyp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gcsabxjcyp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gcsabxjcyp .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#gcsabxjcyp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gcsabxjcyp .gt_from_md > :first-child {
  margin-top: 0;
}

#gcsabxjcyp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gcsabxjcyp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gcsabxjcyp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#gcsabxjcyp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gcsabxjcyp .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#gcsabxjcyp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gcsabxjcyp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gcsabxjcyp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gcsabxjcyp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gcsabxjcyp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gcsabxjcyp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#gcsabxjcyp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gcsabxjcyp .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#gcsabxjcyp .gt_left {
  text-align: left;
}

#gcsabxjcyp .gt_center {
  text-align: center;
}

#gcsabxjcyp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gcsabxjcyp .gt_font_normal {
  font-weight: normal;
}

#gcsabxjcyp .gt_font_bold {
  font-weight: bold;
}

#gcsabxjcyp .gt_font_italic {
  font-style: italic;
}

#gcsabxjcyp .gt_super {
  font-size: 65%;
}

#gcsabxjcyp .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HS</strong>, N = 69<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>IS</strong>, N = 144<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">doa</td>
<td class="gt_row gt_center">2011-01-06 to 2012-06-23</td>
<td class="gt_row gt_center">2011-01-01 to 2012-06-16</td></tr>
    <tr><td class="gt_row gt_left">dod</td>
<td class="gt_row gt_center">2011-01-22 to 2012-06-26</td>
<td class="gt_row gt_center">2011-01-05 to 2012-06-27</td></tr>
    <tr><td class="gt_row gt_left">status</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">alive</td>
<td class="gt_row gt_center">38 (55%)</td>
<td class="gt_row gt_center">127 (88%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">dead</td>
<td class="gt_row gt_center">31 (45%)</td>
<td class="gt_row gt_center">17 (12%)</td></tr>
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
<td class="gt_row gt_center">43 (62%)</td>
<td class="gt_row gt_center">79 (55%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
<td class="gt_row gt_center">26 (38%)</td>
<td class="gt_row gt_center">65 (45%)</td></tr>
    <tr><td class="gt_row gt_left">dm</td>
<td class="gt_row gt_center">19 (28%)</td>
<td class="gt_row gt_center">53 (37%)</td></tr>
    <tr><td class="gt_row gt_left">gcs</td>
<td class="gt_row gt_center">11.0 (6.0, 14.0)</td>
<td class="gt_row gt_center">15.0 (13.8, 15.0)</td></tr>
    <tr><td class="gt_row gt_left">sbp</td>
<td class="gt_row gt_center">152 (139, 187)</td>
<td class="gt_row gt_center">161 (143, 186)</td></tr>
    <tr><td class="gt_row gt_left">dbp</td>
<td class="gt_row gt_center">90 (80, 102)</td>
<td class="gt_row gt_center">91 (79, 103)</td></tr>
    <tr><td class="gt_row gt_left">wbc</td>
<td class="gt_row gt_center">11.4 (9.4, 14.9)</td>
<td class="gt_row gt_center">8.8 (7.2, 11.1)</td></tr>
    <tr><td class="gt_row gt_left">time2</td>
<td class="gt_row gt_center">6 (4, 15)</td>
<td class="gt_row gt_center">4 (3, 5)</td></tr>
    <tr><td class="gt_row gt_left">referral_from</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">hospital</td>
<td class="gt_row gt_center">46 (67%)</td>
<td class="gt_row gt_center">34 (24%)</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">non-hospital</td>
<td class="gt_row gt_center">23 (33%)</td>
<td class="gt_row gt_center">110 (76%)</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="3">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          Range; n (%); Median (IQR)
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="kaplan-meier-survival-estimates" class="section level2" number="11.5">
<h2><span class="header-section-number">11.5</span> Kaplan-Meier survival estimates</h2>
<p>Kaplan-Meier survival estimates is the non-parametric survival estimates. It provides the survival probability estimates at different time. Using <code>survfit()</code>, we can estimate the survival probability based on Kaplan-Meier (KM).</p>
<p>Let’s estimate the survival probabilities for</p>
<ul>
<li>overall</li>
<li>stroke types</li>
</ul>
<p>The survival probabilities for all patients:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="survival-analysis.html#cb536-1" aria-hidden="true" tabindex="-1"></a>KM <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb536-2"><a href="survival-analysis.html#cb536-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span> ) <span class="sc">~</span> <span class="dv">1</span>, </span>
<span id="cb536-3"><a href="survival-analysis.html#cb536-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> stroke)</span>
<span id="cb536-4"><a href="survival-analysis.html#cb536-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(KM)</span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     1, data = stroke)
## 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    213       9    0.958  0.0138       0.9311        0.985
##     2    190       4    0.938  0.0168       0.9053        0.971
##     3    166       4    0.915  0.0198       0.8770        0.955
##     4    130       4    0.887  0.0237       0.8416        0.934
##     5     90       5    0.838  0.0310       0.7790        0.901
##     6     65       3    0.799  0.0367       0.7301        0.874
##     7     56       4    0.742  0.0438       0.6608        0.833
##     9     42       1    0.724  0.0462       0.6391        0.821
##    10     37       1    0.705  0.0489       0.6150        0.807
##    12     33       4    0.619  0.0587       0.5142        0.746
##    14     24       2    0.568  0.0642       0.4548        0.708
##    18     19       1    0.538  0.0674       0.4206        0.687
##    22     15       1    0.502  0.0718       0.3792        0.664
##    25      9       2    0.390  0.0892       0.2494        0.611
##    28      5       1    0.312  0.0998       0.1669        0.584
##    29      4       1    0.234  0.1009       0.1007        0.545
##    41      2       1    0.117  0.0970       0.0231        0.593</code></pre>
<p>Next, we will estimate the survival probabilities for stroke type:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="survival-analysis.html#cb538-1" aria-hidden="true" tabindex="-1"></a>KM_str_type2 <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb538-2"><a href="survival-analysis.html#cb538-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span> ) <span class="sc">~</span> stroke_type, </span>
<span id="cb538-3"><a href="survival-analysis.html#cb538-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data =</span> stroke)</span>
<span id="cb538-4"><a href="survival-analysis.html#cb538-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(KM_str_type2)</span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     stroke_type, data = stroke)
## 
##                 stroke_type=HS 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1     69       6    0.913  0.0339       0.8489        0.982
##     2     61       1    0.898  0.0365       0.8293        0.973
##     3     58       4    0.836  0.0453       0.7520        0.930
##     4     52       2    0.804  0.0489       0.7136        0.906
##     5     47       4    0.736  0.0554       0.6346        0.853
##     6     38       2    0.697  0.0589       0.5905        0.822
##     7     34       2    0.656  0.0621       0.5447        0.790
##     9     30       1    0.634  0.0638       0.5205        0.772
##    10     27       1    0.611  0.0656       0.4945        0.754
##    12     24       2    0.560  0.0693       0.4390        0.713
##    14     19       1    0.530  0.0717       0.4068        0.691
##    18     15       1    0.495  0.0751       0.3675        0.666
##    22     11       1    0.450  0.0806       0.3166        0.639
##    25      6       2    0.300  0.1019       0.1541        0.584
##    29      2       1    0.150  0.1176       0.0322        0.698
## 
##                 stroke_type=IS 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    144       3    0.979  0.0119        0.956        1.000
##     2    129       3    0.956  0.0174        0.923        0.991
##     4     78       2    0.932  0.0241        0.886        0.980
##     5     43       1    0.910  0.0318        0.850        0.975
##     6     27       1    0.876  0.0451        0.792        0.970
##     7     22       2    0.797  0.0676        0.675        0.941
##    12      9       2    0.620  0.1223        0.421        0.912
##    14      5       1    0.496  0.1479        0.276        0.890
##    28      3       1    0.331  0.1671        0.123        0.890
##    41      1       1    0.000     NaN           NA           NA</code></pre>
</div>
<div id="plot-the-survival-probability" class="section level2" number="11.6">
<h2><span class="header-section-number">11.6</span> Plot the survival probability</h2>
<p>The KM estimate provides the survival probabilites. We can plot these probabilities to look at the trend of survival over time. The plot provides</p>
<ol style="list-style-type: decimal">
<li>survival probability on the y-axis</li>
<li>time on the x-axis</li>
</ol>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="survival-analysis.html#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(KM_str_type2, </span>
<span id="cb540-2"><a href="survival-analysis.html#cb540-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> stroke, </span>
<span id="cb540-3"><a href="survival-analysis.html#cb540-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table =</span> <span class="cn">TRUE</span>, </span>
<span id="cb540-4"><a href="survival-analysis.html#cb540-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>),</span>
<span id="cb540-5"><a href="survival-analysis.html#cb540-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">tables.height =</span> <span class="fl">0.3</span>,</span>
<span id="cb540-6"><a href="survival-analysis.html#cb540-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>We can perform the Kaplan-Meier estimates for variable dm too:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="survival-analysis.html#cb541-1" aria-hidden="true" tabindex="-1"></a>KM_dm <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb541-2"><a href="survival-analysis.html#cb541-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span> ) <span class="sc">~</span> dm,</span>
<span id="cb541-3"><a href="survival-analysis.html#cb541-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> stroke)</span>
<span id="cb541-4"><a href="survival-analysis.html#cb541-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(KM_dm)</span></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     dm, data = stroke)
## 
##                 dm=no 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    141       8    0.943  0.0195       0.9058        0.982
##     2    122       4    0.912  0.0242       0.8661        0.961
##     3    102       2    0.894  0.0268       0.8434        0.949
##     4     82       2    0.873  0.0303       0.8152        0.934
##     5     54       5    0.792  0.0441       0.7100        0.883
##     6     40       3    0.732  0.0524       0.6366        0.843
##     7     34       2    0.689  0.0575       0.5854        0.812
##    10     24       1    0.661  0.0619       0.5498        0.794
##    12     20       4    0.529  0.0771       0.3971        0.703
##    18     13       1    0.488  0.0812       0.3521        0.676
##    22      9       1    0.434  0.0884       0.2908        0.647
##    25      4       1    0.325  0.1149       0.1627        0.650
##    29      3       1    0.217  0.1171       0.0752        0.625
## 
##                 dm=yes 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1     72       1    0.986  0.0138       0.9594        1.000
##     3     64       2    0.955  0.0253       0.9070        1.000
##     4     48       2    0.915  0.0367       0.8463        0.990
##     7     22       2    0.832  0.0653       0.7137        0.971
##     9     15       1    0.777  0.0811       0.6330        0.953
##    14      9       2    0.604  0.1248       0.4030        0.906
##    25      5       1    0.483  0.1471       0.2662        0.878
##    28      2       1    0.242  0.1860       0.0534        1.000
##    41      1       1    0.000     NaN           NA           NA</code></pre>
<p>And then we can plot the survival estimates for patients with and without diabetes:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="survival-analysis.html#cb543-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(KM_dm, </span>
<span id="cb543-2"><a href="survival-analysis.html#cb543-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> stroke, </span>
<span id="cb543-3"><a href="survival-analysis.html#cb543-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table =</span> <span class="cn">TRUE</span>, </span>
<span id="cb543-4"><a href="survival-analysis.html#cb543-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">linetype =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>), </span>
<span id="cb543-5"><a href="survival-analysis.html#cb543-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">tables.height =</span> <span class="fl">0.3</span>,</span>
<span id="cb543-6"><a href="survival-analysis.html#cb543-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="comparing-kaplan-meier-estimates-across-groups" class="section level2" number="11.7">
<h2><span class="header-section-number">11.7</span> Comparing Kaplan-Meier estimates across groups</h2>
<p>There are a number of available tests to compare the survival estimates between groups based on KM. The tests include:</p>
<ol style="list-style-type: decimal">
<li>log-rank test (default)</li>
<li>peto-peto test</li>
</ol>
<div id="log-rank-test" class="section level3" number="11.7.1">
<h3><span class="header-section-number">11.7.1</span> Log-rank test</h3>
<p>From Kaplan-Meier survival curves, we could see the graphical representation of survival probabilities in different group over time. And to answer question if the survival estimates are different between levels or groups we can use statistical tests for example the log rank and the peto-peto tests.</p>
<p>For all the test, the null hypothesis is that that the survival estimates between levels or groups are not different. For example, to do that:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="survival-analysis.html#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb544-2"><a href="survival-analysis.html#cb544-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span>) <span class="sc">~</span> stroke_type, </span>
<span id="cb544-3"><a href="survival-analysis.html#cb544-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> stroke,</span>
<span id="cb544-4"><a href="survival-analysis.html#cb544-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">rho =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     stroke_type, data = stroke, rho = 0)
## 
##                  N Observed Expected (O-E)^2/E (O-E)^2/V
## stroke_type=HS  69       31     24.2      1.92      4.51
## stroke_type=IS 144       17     23.8      1.95      4.51
## 
##  Chisq= 4.5  on 1 degrees of freedom, p= 0.03</code></pre>
<p>The survival estimates between the stroke types (<em>IS</em> vs <em>HS</em> groups) are different at the level of <span class="math inline">\(5\%\)</span> significance (p = 0.03).</p>
<p>And for the survival estimates based on diabetes status:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="survival-analysis.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb546-2"><a href="survival-analysis.html#cb546-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span>) <span class="sc">~</span> dm, </span>
<span id="cb546-3"><a href="survival-analysis.html#cb546-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> stroke,</span>
<span id="cb546-4"><a href="survival-analysis.html#cb546-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">rho =</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     dm, data = stroke, rho = 0)
## 
##          N Observed Expected (O-E)^2/E (O-E)^2/V
## dm=no  141       35     29.8     0.919      2.54
## dm=yes  72       13     18.2     1.500      2.54
## 
##  Chisq= 2.5  on 1 degrees of freedom, p= 0.1</code></pre>
<p>The survival estimates between patients with and without diabetes (dm status <em>yes</em> vs <em>no</em> groups) are not different (p = 0.1).</p>
</div>
<div id="peto-peto-test" class="section level3" number="11.7.2">
<h3><span class="header-section-number">11.7.2</span> peto-peto test</h3>
<p>We will be confident with our results if we obtain almost similar findings from other tests. So, now let’s compare survival estimates using the peto-peto test.</p>
<p>This is the result for comparing survival estimates for stroke type using peto-peto test.</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="survival-analysis.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb548-2"><a href="survival-analysis.html#cb548-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span>) <span class="sc">~</span> stroke_type, </span>
<span id="cb548-3"><a href="survival-analysis.html#cb548-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> stroke,</span>
<span id="cb548-4"><a href="survival-analysis.html#cb548-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">rho =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     stroke_type, data = stroke, rho = 1)
## 
##                  N Observed Expected (O-E)^2/E (O-E)^2/V
## stroke_type=HS  69     25.3     18.7      2.33      6.02
## stroke_type=IS 144     13.7     20.3      2.15      6.02
## 
##  Chisq= 6  on 1 degrees of freedom, p= 0.01</code></pre>
<p>This is the result for comparing survival estimates for diabetes status using peto-peto test.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="survival-analysis.html#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb550-2"><a href="survival-analysis.html#cb550-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&quot;dead&quot;</span>) <span class="sc">~</span> dm, </span>
<span id="cb550-3"><a href="survival-analysis.html#cb550-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> stroke,</span>
<span id="cb550-4"><a href="survival-analysis.html#cb550-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">rho =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     dm, data = stroke, rho = 1)
## 
##          N Observed Expected (O-E)^2/E (O-E)^2/V
## dm=no  141    29.54     24.3      1.11      3.61
## dm=yes  72     9.41     14.6      1.85      3.61
## 
##  Chisq= 3.6  on 1 degrees of freedom, p= 0.06</code></pre>
</div>
</div>
<div id="semi-parametric-models-in-survival-analysis" class="section level2" number="11.8">
<h2><span class="header-section-number">11.8</span> Semi-parametric models in survival analysis</h2>
<p>One advantage of time-to-event data (from a cohort study) is the ability to estimate the hazard or risk to develop the event (outcome) of interest. However, the challenge in the cohort study is the presence of censoring. Censoring can happen due to</p>
<ul>
<li>patients leave the study (loss to follow up) randomly</li>
<li>patients do not experience the event even at the termination of the study</li>
<li>patients are withdrawn from the study</li>
</ul>
<p>In censored patients, we do not know exactly the time for them to develop the event.</p>
<p>To explore how to incorporate a regression model-like structure into the hazard function, we can model the hazard function using:</p>
<p><span class="math display">\[h(t) = \theta_0\]</span>
The hazard function is a rate, and because of that it must be strictly positive. To constrain <span class="math inline">\(\theta\)</span> at greater than zero, we can parameterize the hazard function as:</p>
<p><span class="math display">\[h(t) = \exp^{\beta_0}\]</span></p>
<p>So for a covariate <span class="math inline">\(x\)</span> the log-hazard function is:</p>
<p><span class="math display">\[ln[h(t.x)] = \beta_0 + \beta_1(x)\]</span>
and the hazard function is</p>
<p><span class="math display">\[h(t.x) = exp^{\beta_0 + \beta_1(x)}\]</span></p>
<p>This is the exponential distribution which is one example of a fully parametric hazard function. Fully parametric models accomplishes two goals simultaneously:</p>
<ul>
<li>It describes the basic underlying distribution of survival time (error component)</li>
<li>It characterizes how that distribution changes as a function of the covariates (systematic component).</li>
</ul>
<p>However, even though fully parametric models can be used to accomplish the above goals, the assumptions required for their error components may be unnecessarily stringent or unrealistic. One option is to have a fully parametric regression structure but leave their dependence on time unspecified. The models that utilize this approach are called semiparametric regression models.</p>
<div id="cox-proportional-hazard-regression" class="section level3" number="11.8.1">
<h3><span class="header-section-number">11.8.1</span> Cox proportional hazard regression</h3>
<p>If we take our dataset for example, where want to compare the survival experience of stroke patients on different types of stroke (Ischaemic stroke vs Haemorrhagic stroke), one form of a regression model for the hazard function that addresses the study goal is:</p>
<p><span class="math display">\[h(t,x,\beta) = h_0(t)r(x,\beta)\]</span>
We can see that the hazard function is the product of two functions:</p>
<ul>
<li>The function, <span class="math inline">\(h_0(t)\)</span>, characterizes how the hazard function changes as a function of survival time.</li>
<li>The function, <span class="math inline">\(r(x,\beta)\)</span>, characterizes how the hazard function changes as a function of subject covariates.</li>
</ul>
<p>The <span class="math inline">\(h_0(t)\)</span> is frequently referred to as the baseline hazard function. Thus the baseline hazard function is, in some sense, a generalization of the intercept or constant term found in parametric regression models.</p>
<p>The hazard ratio (HR) depends only on the function <span class="math inline">\(r(x,\beta)\)</span>. If the ratio function <span class="math inline">\(HR(t,x_1,x_0)\)</span> has a clear clinical interpretation then, the actual form of the baseline hazard function is of little importance.</p>
<p>With this parameterization the hazard function is</p>
<p><span class="math display">\[h(t,x,\beta) = h_o(t)exp^{x \beta}\]</span></p>
<p>and the hazard ratio is</p>
<p><span class="math display">\[HR(t,x_1, x_0) = exp^{\beta(x_1 - x_0)}\]</span></p>
<p>This model is referred to in the literature by a variety of terms, such as the Cox model, the Cox proportional hazards model or simply the proportional hazards model.</p>
<p>So for example, if we have a covariate which is a dichomotomous (binary), such as stroke type: coded as a value of <span class="math inline">\(x_1 = 1\)</span> and <span class="math inline">\(x_0 = 0\)</span>, for HS and IS, respectively, then the hazard ratio becomes</p>
<p><span class="math display">\[HR(t,x_1, x_0) = exp^\beta\]</span>
If the value of the coefficient is <span class="math inline">\(\beta = ln(2)\)</span>, then the interpretation is that HS are dying at twice <span class="math inline">\((exp^\beta = 2)\)</span> the rate of patients with IS.</p>
</div>
<div id="advantages-of-the-cox-proportional-hazard-regression" class="section level3" number="11.8.2">
<h3><span class="header-section-number">11.8.2</span> Advantages of the Cox proportional hazard regression</h3>
<p>If you remember that by using Kaplan-Meier (KM) analysis, we could estimate the survival probability. And using the log-rank or peto-peto test, we could compare the survival between categorical covariates. However, the disadvantages of KM include:</p>
<ol style="list-style-type: decimal">
<li>Need to categorize numerical variable to compare survival</li>
<li>It is a univariable analysis</li>
<li>It is a non-parametric analysis</li>
</ol>
<p>We also acknowledge that the fully parametric regression models in survival analysis have stringent assumptions and distribution requirement. So, to overcome the limitations of the KM analysis and the fully parametric analysis, we can model our survival data using the semi-parametric <strong>Cox proportional hazard regression</strong>.</p>
</div>
</div>
<div id="estimation-from-cox-proportional-hazards-regression" class="section level2" number="11.9">
<h2><span class="header-section-number">11.9</span> Estimation from Cox proportional hazards regression</h2>
<div id="simple-cox-ph-regression" class="section level3" number="11.9.1">
<h3><span class="header-section-number">11.9.1</span> Simple Cox PH regression</h3>
<p>Using our stroke dataset, we will estimate the parameters using the Cox PH regression. Remember, in our data we have</p>
<ol style="list-style-type: decimal">
<li>the time variable : <code>time2</code></li>
<li>the event variable : <code>status</code> and the event of interest is <strong>dead</strong>. Event classified other than dead are considered as censored.</li>
<li>date variables : date of admission (doa) and date of discharge (dod)</li>
<li>all other covariates</li>
</ol>
<p>Now let’s take stroke type as the covariate of interest:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="survival-analysis.html#cb552-1" aria-hidden="true" tabindex="-1"></a>stroke_stype <span class="ot">&lt;-</span> </span>
<span id="cb552-2"><a href="survival-analysis.html#cb552-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb552-3"><a href="survival-analysis.html#cb552-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>) <span class="sc">~</span> stroke_type,</span>
<span id="cb552-4"><a href="survival-analysis.html#cb552-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> stroke)</span>
<span id="cb552-5"><a href="survival-analysis.html#cb552-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stroke_stype)</span></code></pre></div>
<pre><code>## Call:
## coxph(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     stroke_type, data = stroke)
## 
##   n= 213, number of events= 48 
## 
##                  coef exp(coef) se(coef)      z Pr(&gt;|z|)  
## stroke_typeIS -0.6622    0.5157   0.3172 -2.088   0.0368 *
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
##               exp(coef) exp(-coef) lower .95 upper .95
## stroke_typeIS    0.5157      1.939     0.277    0.9602
## 
## Concordance= 0.623  (se = 0.045 )
## Likelihood ratio test= 4.52  on 1 df,   p=0.03
## Wald test            = 4.36  on 1 df,   p=0.04
## Score (logrank) test = 4.48  on 1 df,   p=0.03</code></pre>
<p>But for nicer output (in a data frame format), we can use <code>tidy()</code>. This will give us</p>
<ul>
<li>the estimate which is the log hazard. If you exponentiate it, you will get hazard ratio</li>
<li>the standard error</li>
<li>the p-value</li>
<li>the confidence intervals for the log hazard</li>
</ul>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="survival-analysis.html#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(stroke_stype,</span>
<span id="cb554-2"><a href="survival-analysis.html#cb554-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 7
##   term          estimate std.error statistic p.value conf.low conf.high
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 stroke_typeIS   -0.662     0.317     -2.09  0.0368    -1.28   -0.0406</code></pre>
<p>The simple Cox PH model with covariate stroke type shows that the patients with IS has <span class="math inline">\(-0.0662\)</span> times the crude log hazard for death as compared to patients with HS (p-value = 0.0368).</p>
<p>The <span class="math inline">\(95\%\)</span> confidence intervals for the crude log hazards are calculated by:</p>
<p><span class="math display">\[\hat\beta \pm 1.96 \times \widehat{SE}(\hat\beta)\]</span></p>
<p><span class="math display">\[-0.662 \pm 1.96 \times 0.317 = -1.284 , -0.041\]</span></p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="survival-analysis.html#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(stroke_stype, </span>
<span id="cb556-2"><a href="survival-analysis.html#cb556-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb556-3"><a href="survival-analysis.html#cb556-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 7
##   term          estimate std.error statistic p.value conf.low conf.high
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 stroke_typeIS    0.516     0.317     -2.09  0.0368    0.277     0.960</code></pre>
<p>Or we can get the crude hazard ratio (HR) by exponentiating the log HR. In this example, the simple Cox PH model with covariate stroke type shows that the patients with IS has <span class="math inline">\(49\%\)</span> lower risk for stroke death as compared to patients with HS (p-value = 0.0368 and <span class="math inline">\(95\% CI 0.277, 0.960\)</span>).</p>
<p>The <span class="math inline">\(95\%\)</span> confidence intervals for crude HR are calculated by</p>
<p><span class="math display">\[exp[\hat\beta \pm 1.96 \times \widehat{SE}(\hat\beta)]\]</span></p>
<p>Hence, the lower bound for crude HR is <span class="math inline">\(exp(-1.284)= 0.277\)</span> and the upper bound for crude HR is <span class="math inline">\(exp(-0.0041) = 0.996\)</span> at <span class="math inline">\(95\%\)</span> confidence.</p>
<p>Let’s model the risk for stroke death for covariate gcs:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="survival-analysis.html#cb558-1" aria-hidden="true" tabindex="-1"></a>stroke_gcs <span class="ot">&lt;-</span> </span>
<span id="cb558-2"><a href="survival-analysis.html#cb558-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb558-3"><a href="survival-analysis.html#cb558-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>) <span class="sc">~</span> gcs,</span>
<span id="cb558-4"><a href="survival-analysis.html#cb558-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> stroke)</span>
<span id="cb558-5"><a href="survival-analysis.html#cb558-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(stroke_gcs)</span></code></pre></div>
<pre><code>## Call:
## coxph(formula = Surv(time = time2, event = status == &quot;dead&quot;) ~ 
##     gcs, data = stroke)
## 
##   n= 213, number of events= 48 
## 
##         coef exp(coef) se(coef)      z Pr(&gt;|z|)    
## gcs -0.17454   0.83984  0.03431 -5.087 3.63e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
##     exp(coef) exp(-coef) lower .95 upper .95
## gcs    0.8398      1.191    0.7852    0.8983
## 
## Concordance= 0.763  (se = 0.039 )
## Likelihood ratio test= 26.01  on 1 df,   p=3e-07
## Wald test            = 25.88  on 1 df,   p=4e-07
## Score (logrank) test = 29.33  on 1 df,   p=6e-08</code></pre>
<p>The simple Cox PH model with covariate gcs shows that with each one unit increase in gcs, the crude log hazard for death changes by a factor of <span class="math inline">\(-0.175\)</span>.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="survival-analysis.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(stroke_gcs,</span>
<span id="cb560-2"><a href="survival-analysis.html#cb560-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb560-3"><a href="survival-analysis.html#cb560-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 7
##   term  estimate std.error statistic     p.value conf.low conf.high
##   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 gcs      0.840    0.0343     -5.09 0.000000363    0.785     0.898</code></pre>
<p>When we exponentiate the log HR, the simple Cox PH model shows that with each one unit increase in gcs, the crude risk for death decreases for about <span class="math inline">\(16\%\)</span> and the of decrease are between <span class="math inline">\(95\% CI (0.785, 0.898)\)</span>. The relationship between stroke death and gcs is highly significant (p-value <span class="math inline">\(&lt; 0.0001\)</span>) when not adjusting for other covariates.</p>
<p>By using <code>tbl_uvregression()</code> we can generate simple univariable model for all covariates in one line of code. In return, we get the crude HR for all the covariates of interest.</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="survival-analysis.html#cb562-1" aria-hidden="true" tabindex="-1"></a>stroke <span class="sc">%&gt;%</span></span>
<span id="cb562-2"><a href="survival-analysis.html#cb562-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(time2, status, sex, dm, gcs, sbp, dbp, wbc, stroke_type, referral_from) <span class="sc">%&gt;%</span></span>
<span id="cb562-3"><a href="survival-analysis.html#cb562-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_uvregression</span>(</span>
<span id="cb562-4"><a href="survival-analysis.html#cb562-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> coxph,</span>
<span id="cb562-5"><a href="survival-analysis.html#cb562-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">Surv</span>(time2, <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>),</span>
<span id="cb562-6"><a href="survival-analysis.html#cb562-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb562-7"><a href="survival-analysis.html#cb562-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">pvalue_fun =</span> <span class="sc">~</span><span class="fu">style_pvalue</span>(.x, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb562-8"><a href="survival-analysis.html#cb562-8" aria-hidden="true" tabindex="-1"></a>  ) </span></code></pre></div>
<div id="kdodeeibbl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#kdodeeibbl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kdodeeibbl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdodeeibbl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kdodeeibbl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kdodeeibbl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdodeeibbl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kdodeeibbl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kdodeeibbl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kdodeeibbl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kdodeeibbl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kdodeeibbl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kdodeeibbl .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#kdodeeibbl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kdodeeibbl .gt_from_md > :first-child {
  margin-top: 0;
}

#kdodeeibbl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kdodeeibbl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kdodeeibbl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#kdodeeibbl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdodeeibbl .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#kdodeeibbl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kdodeeibbl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kdodeeibbl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kdodeeibbl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kdodeeibbl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdodeeibbl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#kdodeeibbl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kdodeeibbl .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#kdodeeibbl .gt_left {
  text-align: left;
}

#kdodeeibbl .gt_center {
  text-align: center;
}

#kdodeeibbl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kdodeeibbl .gt_font_normal {
  font-weight: normal;
}

#kdodeeibbl .gt_font_bold {
  font-weight: bold;
}

#kdodeeibbl .gt_font_italic {
  font-style: italic;
}

#kdodeeibbl .gt_super {
  font-size: 65%;
}

#kdodeeibbl .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">sex</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">female</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">male</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.71</td>
<td class="gt_row gt_center">0.37, 1.36</td>
<td class="gt_row gt_center">0.299</td></tr>
    <tr><td class="gt_row gt_left">dm</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">no</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">yes</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.60</td>
<td class="gt_row gt_center">0.31, 1.13</td>
<td class="gt_row gt_center">0.112</td></tr>
    <tr><td class="gt_row gt_left">gcs</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center">0.84</td>
<td class="gt_row gt_center">0.79, 0.90</td>
<td class="gt_row gt_center"><0.001</td></tr>
    <tr><td class="gt_row gt_left">sbp</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.99, 1.01</td>
<td class="gt_row gt_center">0.617</td></tr>
    <tr><td class="gt_row gt_left">dbp</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.98, 1.01</td>
<td class="gt_row gt_center">0.772</td></tr>
    <tr><td class="gt_row gt_left">wbc</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center">1.04</td>
<td class="gt_row gt_center">0.97, 1.11</td>
<td class="gt_row gt_center">0.270</td></tr>
    <tr><td class="gt_row gt_left">stroke_type</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">HS</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">IS</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.52</td>
<td class="gt_row gt_center">0.28, 0.96</td>
<td class="gt_row gt_center">0.037</td></tr>
    <tr><td class="gt_row gt_left">referral_from</td>
<td class="gt_row gt_center">213</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">hospital</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">non-hospital</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.58</td>
<td class="gt_row gt_center">0.32, 1.05</td>
<td class="gt_row gt_center">0.074</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="5">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="multiple-cox-ph-regression" class="section level3" number="11.9.2">
<h3><span class="header-section-number">11.9.2</span> Multiple Cox PH regression</h3>
<p>There are two primary reasons to include more than one covariates in the model. One of the primary reasons for using a regression model is to include multiple covariates to adjust statistically for possible imbalances in the observed data before making statistical inferences. In traditional statistical applications, it is called analysis of covariance, while in clinical and epidemiological investigations it is often called control of confounding. The other reason is a statistically related issue where the inclusion of higher-order terms in a model representing interactions between covariates. These are also called effect modifiers.</p>
<p>Let’s decide based on our clinical expertise and statistical significance, we would model a Cox PH model with these covariates.</p>
<ul>
<li>stroke_type</li>
<li>gcs</li>
<li>referral_from</li>
</ul>
<p>The reasons because we found that both gcs and stroke type are statistically significant. We also believe that the way patients are referred to hospital may indicate the severity of stroke. On the other hand, we assumed variables sex, sbp, dbp and wbc are not clinically important risk factors for stroke death.</p>
<p>In addition to that, we foresee that stroke type and death is mediated through gcs. For example, patients that suffer from haemorrhagic stroke will suffer more severe bleeding. This will lead to poorer gcs and pooer survival status. So, by adding both gcs and stroke, we can estimate the total effect from stroke type to death and the effect mediated through gcs.</p>
<p>To estimate to Cox PH model with stroke_type, gcs and referral_from:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="survival-analysis.html#cb563-1" aria-hidden="true" tabindex="-1"></a>stroke_mv <span class="ot">&lt;-</span> </span>
<span id="cb563-2"><a href="survival-analysis.html#cb563-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb563-3"><a href="survival-analysis.html#cb563-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>) <span class="sc">~</span> stroke_type <span class="sc">+</span>  gcs <span class="sc">+</span> referral_from, </span>
<span id="cb563-4"><a href="survival-analysis.html#cb563-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> stroke)</span>
<span id="cb563-5"><a href="survival-analysis.html#cb563-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(stroke_mv, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
##   term                 estimate std.error statistic   p.value conf.low conf.high
##   &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 stroke_typeIS           0.835    0.345     -0.523   6.01e-1    0.424     1.64 
## 2 gcs                     0.847    0.0358    -4.63    3.72e-6    0.790     0.909
## 3 referral_fromnon-ho~    0.824    0.322     -0.602   5.47e-1    0.439     1.55</code></pre>
<p>We would like to doubly confirm if the model with covariates stroke_type, gcs and referral_from and really statistically different from model with stroke type and referral from:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="survival-analysis.html#cb565-1" aria-hidden="true" tabindex="-1"></a>stroke_mv2 <span class="ot">&lt;-</span> </span>
<span id="cb565-2"><a href="survival-analysis.html#cb565-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb565-3"><a href="survival-analysis.html#cb565-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>) <span class="sc">~</span> stroke_type <span class="sc">+</span> referral_from, </span>
<span id="cb565-4"><a href="survival-analysis.html#cb565-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> stroke)</span>
<span id="cb565-5"><a href="survival-analysis.html#cb565-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(stroke_mv, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 7
##   term                 estimate std.error statistic   p.value conf.low conf.high
##   &lt;chr&gt;                   &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 stroke_typeIS           0.835    0.345     -0.523   6.01e-1    0.424     1.64 
## 2 gcs                     0.847    0.0358    -4.63    3.72e-6    0.790     0.909
## 3 referral_fromnon-ho~    0.824    0.322     -0.602   5.47e-1    0.439     1.55</code></pre>
<p>We can confirm this by running the likelihood ratio test between the two Cox PH models:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="survival-analysis.html#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(stroke_mv, stroke_mv2, <span class="at">test =</span> <span class="st">&#39;Chisq&#39;</span>)</span></code></pre></div>
<pre><code>## Analysis of Deviance Table
##  Cox model: response is  Surv(time = time2, event = status == &quot;dead&quot;)
##  Model 1: ~ stroke_type + gcs + referral_from
##  Model 2: ~ stroke_type + referral_from
##    loglik Chisq Df P(&gt;|Chi|)    
## 1 -187.29                       
## 2 -198.08 21.57  1 3.412e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>And true enough, the two Cox PH modes are different (p-value &lt; 0.0001). And we will choose the larger model.</p>
</div>
</div>
<div id="inference" class="section level2" number="11.10">
<h2><span class="header-section-number">11.10</span> Inference</h2>
</div>
<div id="adding-interaction-in-the-model" class="section level2" number="11.11">
<h2><span class="header-section-number">11.11</span> Adding interaction in the model</h2>
<p>Interaction in the model is an interesting phenomenon. To illustrate how we manage interaction term, let’s start with a model with three covariates, gcs, stroke type and dm. In this model, based on clinical knowledge and curiosity, we would develop a two-way interaction term between gcs and stroke type. This interaction term (a product from gcs and stroke type) means the relationship between stroke type and risk for death is heterogenous in different values of gcs.</p>
<p>Let’s assign stroke type as <span class="math inline">\(st\)</span> and code it as either 1 (HS) and 0 (IS)</p>
<p><span class="math display">\[g(t,st,gsc,dm,\beta) = ln[h_0(t) + st\beta_1 + gcs\beta_2 + (st \times gcs)\beta_3 + dm\beta_4]\]</span>
And the difference in the log hazard function becomes</p>
<p><span class="math display">\[[g(t,st = 1,gcs, dm,\beta) - g(t,st = 0,gcs, dm,\beta)]\]</span>
<span class="math display">\[= ln[h_0(t) + 1beta_1 + gcs\beta_2 + (1gcs)\beta_3 + dm\beta_4] -\]</span>
<span class="math display">\[ln[h_0(t) + 0beta_1 + gcs\beta_2 + (0gcs)\beta_3 + dm\beta_4]\]</span>
<span class="math display">\[=beta_1 + gcs\beta_3\]</span></p>
<p>To run model with an interaction for Cox PH model, we can:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="survival-analysis.html#cb569-1" aria-hidden="true" tabindex="-1"></a>stroke_noia <span class="ot">&lt;-</span> </span>
<span id="cb569-2"><a href="survival-analysis.html#cb569-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb569-3"><a href="survival-analysis.html#cb569-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>) <span class="sc">~</span> stroke_type <span class="sc">+</span> gcs <span class="sc">+</span> dm, </span>
<span id="cb569-4"><a href="survival-analysis.html#cb569-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> stroke)</span>
<span id="cb569-5"><a href="survival-analysis.html#cb569-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-6"><a href="survival-analysis.html#cb569-6" aria-hidden="true" tabindex="-1"></a>stroke_ia <span class="ot">&lt;-</span> </span>
<span id="cb569-7"><a href="survival-analysis.html#cb569-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> time2, </span>
<span id="cb569-8"><a href="survival-analysis.html#cb569-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">event =</span> status <span class="sc">==</span> <span class="st">&#39;dead&#39;</span>) <span class="sc">~</span> stroke_type <span class="sc">+</span> gcs <span class="sc">+</span> stroke_type<span class="sc">:</span>gcs <span class="sc">+</span> dm, </span>
<span id="cb569-9"><a href="survival-analysis.html#cb569-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">data =</span> stroke)</span>
<span id="cb569-10"><a href="survival-analysis.html#cb569-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-11"><a href="survival-analysis.html#cb569-11" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(stroke_ia, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 7
##   term              estimate std.error statistic  p.value conf.low conf.high
##   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
## 1 stroke_typeIS        0.770    0.759     -0.345 0.730       0.174     3.41 
## 2 gcs                  0.839    0.0480    -3.67  0.000244    0.763     0.921
## 3 dmyes                0.653    0.342     -1.25  0.212       0.334     1.28 
## 4 stroke_typeIS:gcs    1.01     0.0728     0.187 0.852       0.879     1.17</code></pre>
<p>It appears that the p-value for the interaction term (a product of gcs and stroke type) is large (p value = 0.852).</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="survival-analysis.html#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(stroke_ia, stroke_noia, <span class="at">test =</span> <span class="st">&#39;Chisq&#39;</span>)</span></code></pre></div>
<pre><code>## Analysis of Deviance Table
##  Cox model: response is  Surv(time = time2, event = status == &quot;dead&quot;)
##  Model 1: ~ stroke_type + gcs + stroke_type:gcs + dm
##  Model 2: ~ stroke_type + gcs + dm
##    loglik  Chisq Df P(&gt;|Chi|)
## 1 -186.61                    
## 2 -186.63 0.0351  1    0.8514</code></pre>
<p>And when we run likelihood ratio test, we also observe the same result (p value = 0.851). And because of that, we decide not to add the interaction term in the model. However, it is also recommended to confirm this decision after discussion with subject matter expert, in this case, a stroke physician or neurosurgeon.</p>
</div>
<div id="the-proportional-hazard-assumption" class="section level2" number="11.12">
<h2><span class="header-section-number">11.12</span> The proportional hazard assumption</h2>
<div id="risk-constant-over-time" class="section level3" number="11.12.1">
<h3><span class="header-section-number">11.12.1</span> Risk constant over time</h3>
<p>The most important assumption in Cox PH regression is the proportionality of the hazards over time. It refers to the requirement that, the hazard functions are multiplicatively related and that their ratio is constant over survival time or it simply says that the estimated HR do not depend on time.</p>
<p>A check of the proportional hazards assumption can be done by looking at the parameter estimates <span class="math inline">\(\beta_1, ..., \beta_q\)</span> over time. And we can safely assume proportional hazards when the estimates don’t vary much over time. In most settings, in order to test the PH assumption, we can employ two-step procedure for assessing:</p>
<ul>
<li>calculate covariate specific tests and</li>
<li>plot the scaled and smoothed scaled Schoenfeld residuals obtained from the model.</li>
</ul>
</div>
<div id="test-for-ph-assumption" class="section level3" number="11.12.2">
<h3><span class="header-section-number">11.12.2</span> Test for PH assumption</h3>
<p>In many statistical software, the null hypothesis of constant regression coefficients can be tested, both globally as well as for each covariate. In R, this can be done using the <code>cox.zph()</code> function from the <strong>survival</strong> package.</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="survival-analysis.html#cb573-1" aria-hidden="true" tabindex="-1"></a>stroke_zph <span class="ot">&lt;-</span> <span class="fu">cox.zph</span>(stroke_mv, <span class="at">transform =</span> <span class="st">&#39;km&#39;</span>)</span>
<span id="cb573-2"><a href="survival-analysis.html#cb573-2" aria-hidden="true" tabindex="-1"></a>stroke_zph</span></code></pre></div>
<pre><code>##                 chisq df    p
## stroke_type   1.38336  1 0.24
## gcs           0.00764  1 0.93
## referral_from 1.39355  1 0.24
## GLOBAL        1.63410  3 0.65</code></pre>
<p>The global test is not significant (p value = 0.65)E and the p-value for each of the covariate is also larger than 0.05. These evidence support that the there risks are proportional over time.</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="survival-analysis.html#cb575-1" aria-hidden="true" tabindex="-1"></a>stroke_zph_rank <span class="ot">&lt;-</span> <span class="fu">cox.zph</span>(stroke_mv, <span class="at">transform =</span> <span class="st">&#39;rank&#39;</span>)</span>
<span id="cb575-2"><a href="survival-analysis.html#cb575-2" aria-hidden="true" tabindex="-1"></a>stroke_zph_rank</span></code></pre></div>
<pre><code>##               chisq df    p
## stroke_type    1.29  1 0.26
## gcs            1.62  1 0.20
## referral_from  1.86  1 0.17
## GLOBAL         3.05  3 0.38</code></pre>
</div>
<div id="plots-to-assess-ph-assumption" class="section level3" number="11.12.3">
<h3><span class="header-section-number">11.12.3</span> Plots to assess PH assumption</h3>
<p>We can plots these residuals</p>
<ul>
<li>deviance</li>
<li>schoenfeld</li>
<li>scaled schoenfeld</li>
</ul>
<p>For example, let’s start with plotting the residuals</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="survival-analysis.html#cb577-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(stroke_mv, <span class="at">type =</span> <span class="st">&quot;deviance&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>Now, we will use schoenfeld</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="survival-analysis.html#cb579-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(stroke_mv, <span class="at">type =</span> <span class="st">&quot;schoenfeld&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div class="sourceCode" id="cb581"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb581-1"><a href="survival-analysis.html#cb581-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(stroke_mv, <span class="at">type =</span> <span class="st">&quot;deviance&quot;</span>, <span class="at">ox.scale =</span> <span class="st">&#39;time&#39;</span>)</span></code></pre></div>
<pre><code>## Warning in ggcoxdiagnostics(stroke_mv, type = &quot;deviance&quot;, ox.scale = &quot;time&quot;):
## ox.scale=&#39;time&#39; works only with type=schoenfeld/scaledsch</code></pre>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="survival-analysis.html#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(stroke_mv, <span class="at">type =</span> <span class="st">&quot;deviance&quot;</span>, <span class="at">ox.scale =</span> <span class="st">&quot;linear.predictions&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="survival-analysis.html#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(stroke_mv, <span class="at">type =</span> <span class="st">&quot;schoenfeld&quot;</span>, <span class="at">ox.scale =</span> <span class="st">&quot;observation.id&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<p>You may refer to this link for more details <a href="http://pdf.medrang.co.kr/CSAM/2017/024/csam-24-583_suppl.pdf" class="uri">http://pdf.medrang.co.kr/CSAM/2017/024/csam-24-583_suppl.pdf</a></p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="survival-analysis.html#cb588-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stroke_zph, <span class="at">var =</span> <span class="st">&quot;stroke_type&quot;</span>)</span></code></pre></div>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<ul>
<li>for gcs</li>
</ul>
<div class="sourceCode" id="cb589"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb589-1"><a href="survival-analysis.html#cb589-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stroke_zph, <span class="at">var =</span> <span class="st">&quot;gcs&quot;</span>)</span></code></pre></div>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>The plot for gcs shows possible violation of PH assumption. Even though, the <code>coxzph()</code> shows p value of larger than 0.05, there is a possibility that due to small sample size in the data, the PH test lost its power. However we believe that the violation is not severe.</p>
<ul>
<li>for referral type</li>
</ul>
<div class="sourceCode" id="cb590"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb590-1"><a href="survival-analysis.html#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(stroke_zph, <span class="at">var =</span> <span class="st">&quot;referral_from&quot;</span>)</span></code></pre></div>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<p>In the case of serious violation of proportionality of hazard, we can remedy using</p>
<ol style="list-style-type: decimal">
<li>stratified cox regression</li>
<li>extended cox regression using time-varying dependent variable</li>
<li>parametric survival analysis</li>
</ol>
</div>
</div>
<div id="model-checking" class="section level2" number="11.13">
<h2><span class="header-section-number">11.13</span> Model checking</h2>
<div id="prediction-from-cox-ph-model" class="section level3" number="11.13.1">
<h3><span class="header-section-number">11.13.1</span> Prediction from Cox PH model</h3>
<p>From the Cox PH model, we can predict</p>
<ol style="list-style-type: decimal">
<li>the linear predictor</li>
<li>the risk</li>
<li>the expected number of events given the covariates and follow-up time</li>
</ol>
<ul>
<li>The linear predictor</li>
</ul>
<div class="sourceCode" id="cb591"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb591-1"><a href="survival-analysis.html#cb591-1" aria-hidden="true" tabindex="-1"></a>stroke_lp <span class="ot">&lt;-</span> <span class="fu">augment</span>(stroke_mv, <span class="at">data =</span> stroke)</span>
<span id="cb591-2"><a href="survival-analysis.html#cb591-2" aria-hidden="true" tabindex="-1"></a>stroke_lp <span class="sc">%&gt;%</span></span>
<span id="cb591-3"><a href="survival-analysis.html#cb591-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(gcs, stroke_type, referral_from, .fitted<span class="sc">:</span>.resid) <span class="sc">%&gt;%</span></span>
<span id="cb591-4"><a href="survival-analysis.html#cb591-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 6
##      gcs stroke_type referral_from .fitted .se.fit  .resid
##    &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1    15 IS          non-hospital  -0.785   0.365  -0.0192
##  2    15 IS          non-hospital  -0.785   0.365  -0.0192
##  3    11 HS          hospital       0.252   0.0545  0.970 
##  4     3 IS          hospital       1.40    0.537   0.907 
##  5    15 IS          non-hospital  -0.785   0.365  -0.0192
##  6     3 HS          hospital       1.58    0.341   0.888 
##  7    11 IS          hospital       0.0716  0.361  -0.0453
##  8    15 IS          non-hospital  -0.785   0.365  -0.0192
##  9     6 HS          hospital       1.08    0.234   0.932 
## 10    15 IS          non-hospital  -0.785   0.365  -0.0192</code></pre>
<ul>
<li>The predicted risk which is the risk score <span class="math inline">\(exp(lp)\)</span> (“risk”),</li>
</ul>
<div class="sourceCode" id="cb593"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb593-1"><a href="survival-analysis.html#cb593-1" aria-hidden="true" tabindex="-1"></a>risks <span class="ot">&lt;-</span> </span>
<span id="cb593-2"><a href="survival-analysis.html#cb593-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">augment</span>(stroke_mv, </span>
<span id="cb593-3"><a href="survival-analysis.html#cb593-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> stroke, </span>
<span id="cb593-4"><a href="survival-analysis.html#cb593-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type.predict =</span> <span class="st">&quot;risk&quot;</span>)</span>
<span id="cb593-5"><a href="survival-analysis.html#cb593-5" aria-hidden="true" tabindex="-1"></a>risks <span class="sc">%&gt;%</span></span>
<span id="cb593-6"><a href="survival-analysis.html#cb593-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(status, gcs, stroke_type, referral_from, .fitted<span class="sc">:</span>.resid) <span class="sc">%&gt;%</span></span>
<span id="cb593-7"><a href="survival-analysis.html#cb593-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 7
##    status   gcs stroke_type referral_from .fitted .se.fit  .resid
##    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 alive     15 IS          non-hospital    0.456  0.247  -0.0192
##  2 alive     15 IS          non-hospital    0.456  0.247  -0.0192
##  3 dead      11 HS          hospital        1.29   0.0618  0.970 
##  4 dead       3 IS          hospital        4.05   1.08    0.907 
##  5 alive     15 IS          non-hospital    0.456  0.247  -0.0192
##  6 dead       3 HS          hospital        4.85   0.751   0.888 
##  7 alive     11 IS          hospital        1.07   0.374  -0.0453
##  8 alive     15 IS          non-hospital    0.456  0.247  -0.0192
##  9 dead       6 HS          hospital        2.95   0.401   0.932 
## 10 alive     15 IS          non-hospital    0.456  0.247  -0.0192</code></pre>
<ul>
<li>The expected is the expected number of events given the covariates and follow-up time (“expected”). The survival probability for a subject is equal to <span class="math inline">\(exp(-expected)\)</span>.</li>
</ul>
<div class="sourceCode" id="cb595"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb595-1"><a href="survival-analysis.html#cb595-1" aria-hidden="true" tabindex="-1"></a>expected <span class="ot">&lt;-</span> </span>
<span id="cb595-2"><a href="survival-analysis.html#cb595-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">augment</span>(stroke_mv, </span>
<span id="cb595-3"><a href="survival-analysis.html#cb595-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">data =</span> stroke, </span>
<span id="cb595-4"><a href="survival-analysis.html#cb595-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">type.predict =</span> <span class="st">&quot;expected&quot;</span>)</span>
<span id="cb595-5"><a href="survival-analysis.html#cb595-5" aria-hidden="true" tabindex="-1"></a>expected <span class="sc">%&gt;%</span></span>
<span id="cb595-6"><a href="survival-analysis.html#cb595-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(status, gcs, stroke_type, referral_from, .fitted<span class="sc">:</span>.resid) <span class="sc">%&gt;%</span></span>
<span id="cb595-7"><a href="survival-analysis.html#cb595-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">surv_prob =</span> <span class="fu">exp</span>(<span class="sc">-</span>(.fitted))) <span class="sc">%&gt;%</span></span>
<span id="cb595-8"><a href="survival-analysis.html#cb595-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 8
##    status   gcs stroke_type referral_from .fitted .se.fit  .resid surv_prob
##    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
##  1 alive     15 IS          non-hospital   0.0192 0.00801 -0.0192     0.981
##  2 alive     15 IS          non-hospital   0.0192 0.00801 -0.0192     0.981
##  3 dead      11 HS          hospital       0.0297 0.0209   0.970      0.971
##  4 dead       3 IS          hospital       0.0933 0.0853   0.907      0.911
##  5 alive     15 IS          non-hospital   0.0192 0.00801 -0.0192     0.981
##  6 dead       3 HS          hospital       0.112  0.0850   0.888      0.894
##  7 alive     11 IS          hospital       0.0453 0.0193  -0.0453     0.956
##  8 alive     15 IS          non-hospital   0.0192 0.00801 -0.0192     0.981
##  9 dead       6 HS          hospital       0.0680 0.0472   0.932      0.934
## 10 alive     15 IS          non-hospital   0.0192 0.00801 -0.0192     0.981</code></pre>
<p>The Cox model is a relative risk model; predictions of type “linear predictor,” “risk,” and “terms” are all relative to the sample from which they came. By default, the reference value for each of these is the mean covariate within strata. Predictions of type “expected” incorporate the baseline hazard and are thus absolute instead of relative; the reference option has no effect on these.</p>
</div>
<div id="residuas-from-cox-ph-model" class="section level3" number="11.13.2">
<h3><span class="header-section-number">11.13.2</span> Residuas from Cox PH model</h3>
<p>Here, we will generate the</p>
<ul>
<li>martingale residuals</li>
<li>deviance</li>
<li>schoenfeld</li>
<li>dfbeta</li>
<li>scaled schoenfeld</li>
</ul>
<div class="sourceCode" id="cb597"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb597-1"><a href="survival-analysis.html#cb597-1" aria-hidden="true" tabindex="-1"></a>rmartingale <span class="ot">&lt;-</span> <span class="fu">residuals</span>(stroke_mv, <span class="st">&#39;martingale&#39;</span>)</span>
<span id="cb597-2"><a href="survival-analysis.html#cb597-2" aria-hidden="true" tabindex="-1"></a>rdeviance <span class="ot">&lt;-</span> <span class="fu">residuals</span>(stroke_mv, <span class="st">&#39;deviance&#39;</span>)</span>
<span id="cb597-3"><a href="survival-analysis.html#cb597-3" aria-hidden="true" tabindex="-1"></a>rschoenfeld <span class="ot">&lt;-</span> <span class="fu">residuals</span>(stroke_mv, <span class="st">&#39;schoenfeld&#39;</span>)</span>
<span id="cb597-4"><a href="survival-analysis.html#cb597-4" aria-hidden="true" tabindex="-1"></a>rdfbeta <span class="ot">&lt;-</span> <span class="fu">residuals</span>(stroke_mv, <span class="st">&#39;dfbeta&#39;</span>)</span>
<span id="cb597-5"><a href="survival-analysis.html#cb597-5" aria-hidden="true" tabindex="-1"></a>rscaled_sch <span class="ot">&lt;-</span> <span class="fu">residuals</span>(stroke_mv, <span class="st">&#39;scaledsch&#39;</span>)</span></code></pre></div>
</div>
<div id="influential-observations" class="section level3" number="11.13.3">
<h3><span class="header-section-number">11.13.3</span> Influential observations</h3>
<p>We may check the <span class="math inline">\(dfbetas\)</span> residual. This is residual that comes from a transformation of the score residual. It enables us to check the influence of dropping any single observation on parameter estimates. We may suspect influential observations when the <span class="math inline">\(dfbetas\)</span> residuals greater than 1.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="survival-analysis.html#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(stroke_mv, </span>
<span id="cb598-2"><a href="survival-analysis.html#cb598-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">type =</span> <span class="st">&quot;dfbetas&quot;</span>, </span>
<span id="cb598-3"><a href="survival-analysis.html#cb598-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">point.size =</span> <span class="dv">0</span>, </span>
<span id="cb598-4"><a href="survival-analysis.html#cb598-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">hline.col =</span> <span class="st">&quot;black&quot;</span>, </span>
<span id="cb598-5"><a href="survival-analysis.html#cb598-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sline.col =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
</div>
</div>
<div id="plot-the-adjusted-survival" class="section level2" number="11.14">
<h2><span class="header-section-number">11.14</span> Plot the adjusted survival</h2>
<p>The function <code>surv_adjustedcurves()</code> calculates while the function <code>ggadjustedcurves()</code> plots adjusted survival curves for the coxph model. The main idea behind this function is to present expected survival curves calculated based on Cox model separately for subpopulations.</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb600-1"><a href="survival-analysis.html#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggadjustedcurves</span>(stroke_mv, </span>
<span id="cb600-2"><a href="survival-analysis.html#cb600-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> stroke)</span></code></pre></div>
<p><img src="10_KM_Cox2_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
</div>
<div id="presentation-and-interpretation" class="section level2" number="11.15">
<h2><span class="header-section-number">11.15</span> Presentation and interpretation</h2>
<p>The Cox PH model that we believe explains the risk for death among hospitalized acute stroke patients can be presented as below:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb601-1"><a href="survival-analysis.html#cb601-1" aria-hidden="true" tabindex="-1"></a>stroke_mv <span class="sc">%&gt;%</span></span>
<span id="cb601-2"><a href="survival-analysis.html#cb601-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_regression</span>(</span>
<span id="cb601-3"><a href="survival-analysis.html#cb601-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">exponentiate =</span> <span class="cn">TRUE</span>,</span>
<span id="cb601-4"><a href="survival-analysis.html#cb601-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">pvalue_fun =</span> <span class="sc">~</span><span class="fu">style_pvalue</span>(.x, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb601-5"><a href="survival-analysis.html#cb601-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb601-6"><a href="survival-analysis.html#cb601-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_nevent</span>(<span class="at">location =</span> <span class="st">&#39;level&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb601-7"><a href="survival-analysis.html#cb601-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_p</span>(<span class="at">t =</span> <span class="fl">0.10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb601-8"><a href="survival-analysis.html#cb601-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bold_labels</span>()</span></code></pre></div>
<div id="ahskrhqsjy" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#ahskrhqsjy .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ahskrhqsjy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahskrhqsjy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ahskrhqsjy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ahskrhqsjy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahskrhqsjy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahskrhqsjy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ahskrhqsjy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ahskrhqsjy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ahskrhqsjy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ahskrhqsjy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ahskrhqsjy .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#ahskrhqsjy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ahskrhqsjy .gt_from_md > :first-child {
  margin-top: 0;
}

#ahskrhqsjy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ahskrhqsjy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ahskrhqsjy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#ahskrhqsjy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahskrhqsjy .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#ahskrhqsjy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahskrhqsjy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ahskrhqsjy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ahskrhqsjy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahskrhqsjy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahskrhqsjy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#ahskrhqsjy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahskrhqsjy .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#ahskrhqsjy .gt_left {
  text-align: left;
}

#ahskrhqsjy .gt_center {
  text-align: center;
}

#ahskrhqsjy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ahskrhqsjy .gt_font_normal {
  font-weight: normal;
}

#ahskrhqsjy .gt_font_bold {
  font-weight: bold;
}

#ahskrhqsjy .gt_font_italic {
  font-style: italic;
}

#ahskrhqsjy .gt_super {
  font-size: 65%;
}

#ahskrhqsjy .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Event N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>HR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="font-weight: bold;">stroke_type</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">HS</td>
<td class="gt_row gt_center">31</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">IS</td>
<td class="gt_row gt_center">17</td>
<td class="gt_row gt_center">0.83</td>
<td class="gt_row gt_center">0.42, 1.64</td>
<td class="gt_row gt_center">0.601</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">gcs</td>
<td class="gt_row gt_center">48</td>
<td class="gt_row gt_center">0.85</td>
<td class="gt_row gt_center">0.79, 0.91</td>
<td class="gt_row gt_center" style="font-weight: bold;"><0.001</td></tr>
    <tr><td class="gt_row gt_left" style="font-weight: bold;">referral_from</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">hospital</td>
<td class="gt_row gt_center">29</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">non-hospital</td>
<td class="gt_row gt_center">19</td>
<td class="gt_row gt_center">0.82</td>
<td class="gt_row gt_center">0.44, 1.55</td>
<td class="gt_row gt_center">0.547</td></tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="5">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          HR = Hazard Ratio, CI = Confidence Interval
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="references-3" class="section level2" number="11.16">
<h2><span class="header-section-number">11.16</span> References</h2>
<p>For further understanding of the survival analysis concepts and application, excellent text include <span class="citation">(<a href="#ref-Lemeshow_Stanley2008-03-07" role="doc-biblioref"><strong>Lemeshow_Stanley2008-03-07?</strong></a>)</span><span class="citation">(<a href="#ref-survival-book" role="doc-biblioref"><strong>survival-book?</strong></a>)</span></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="poisson-regression.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/drkamarul10_KM_Cox2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["dataanalysis.pdf", "dataanalysis.epub", "dataanalysis.mobi"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
